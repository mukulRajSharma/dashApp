{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/overlay/ui.overlay.js)\r\n * Version: 21.1.5\r\n * Build date: Mon Aug 02 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport fx from \"../../animation/fx\";\nimport positionUtils from \"../../animation/position\";\nimport { locate, move, resetPosition } from \"../../animation/translator\";\nimport registerComponent from \"../../core/component_registrator\";\nimport devices from \"../../core/devices\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { getPublicElement } from \"../../core/element\";\nimport $ from \"../../core/renderer\";\nimport { EmptyTemplate } from \"../../core/templates/empty_template\";\nimport { inArray } from \"../../core/utils/array\";\nimport browser from \"../../core/utils/browser\";\nimport { noop } from \"../../core/utils/common\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { contains, resetActiveElement } from \"../../core/utils/dom\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { fitIntoRange } from \"../../core/utils/math\";\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\nimport { isString, isDefined, isFunction, isPlainObject, isWindow, isEvent } from \"../../core/utils/type\";\nimport { changeCallback, originalViewPort, value as viewPort } from \"../../core/utils/view_port\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { start as dragEventStart, move as dragEventMove } from \"../../events/drag\";\nimport pointerEvents from \"../../events/pointer\";\nimport { keyboard } from \"../../events/short\";\nimport { addNamespace, isCommandKeyPressed, normalizeKeyName } from \"../../events/utils/index\";\nimport { triggerHidingEvent, triggerResizeEvent, triggerShownEvent } from \"../../events/visibility_change\";\nimport { hideCallback as hideTopOverlayCallback } from \"../../mobile/hide_callback\";\nimport Resizable from \"../resizable\";\nimport { tabbable } from \"../widget/selectors\";\nimport swatch from \"../widget/swatch_container\";\nimport Widget from \"../widget/ui.widget\";\nimport * as zIndexPool from \"./z_index\";\nvar ready = readyCallbacks.add;\nvar window = getWindow();\nvar viewPortChanged = changeCallback;\nvar OVERLAY_CLASS = \"dx-overlay\";\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\nvar OVERLAY_MODAL_CLASS = \"dx-overlay-modal\";\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"];\nvar OVERLAY_STACK = [];\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\nvar TAB_KEY = \"tab\";\nvar POSITION_ALIASES = {\n  top: {\n    my: \"top center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"bottom center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"right center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"left center\",\n    at: \"left center\"\n  },\n  center: {\n    my: \"center\",\n    at: \"center\"\n  },\n  \"right bottom\": {\n    my: \"right bottom\",\n    at: \"right bottom\"\n  },\n  \"right top\": {\n    my: \"right top\",\n    at: \"right top\"\n  },\n  \"left bottom\": {\n    my: \"left bottom\",\n    at: \"left bottom\"\n  },\n  \"left top\": {\n    my: \"left top\",\n    at: \"left top\"\n  }\n};\nvar realDevice = devices.real();\nvar firefoxDesktop = browser.mozilla && \"desktop\" === realDevice.deviceType;\nvar iOS = \"ios\" === realDevice.platform;\nvar hasSafariAddressBar = browser.safari && \"desktop\" !== realDevice.deviceType;\n\nvar forceRepaint = $element => {\n  if (firefoxDesktop) {\n    $element.width();\n  }\n};\n\nvar getElement = value => {\n  if (isEvent(value)) {\n    value = value.target;\n  }\n\n  return $(value);\n};\n\nready(() => {\n  eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\n    for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\nvar Overlay = Widget.inherit({\n  _supportedKeys: function () {\n    var move = function (top, left, e) {\n      if (!this.option(\"dragEnabled\")) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      var allowedOffsets = this._allowedOffsets();\n\n      var offset = {\n        top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),\n        left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)\n      };\n\n      this._changePosition(offset);\n    };\n\n    return extend(this.callBase(), {\n      escape: function () {\n        this.hide();\n      },\n      upArrow: move.bind(this, -5, 0),\n      downArrow: move.bind(this, 5, 0),\n      leftArrow: move.bind(this, 0, -5),\n      rightArrow: move.bind(this, 0, 5)\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      position: {\n        my: \"center\",\n        at: \"center\"\n      },\n      width: function () {\n        return .8 * $(window).width();\n      },\n      minWidth: null,\n      maxWidth: null,\n      height: function () {\n        return .8 * $(window).height();\n      },\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          to: {\n            opacity: 0,\n            scale: .55\n          },\n          from: {\n            opacity: 1,\n            scale: 1\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      dragEnabled: false,\n      resizeEnabled: false,\n      onResizeStart: null,\n      onResize: null,\n      onResizeEnd: null,\n      innerOverlay: false,\n      target: void 0,\n      container: void 0,\n      hideTopOverlayHandler: () => {\n        this.hide();\n      },\n      closeOnTargetScroll: false,\n      onPositioned: null,\n      boundaryOffset: {\n        h: 0,\n        v: 0\n      },\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true,\n      _fixedPosition: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !hasWindow();\n      },\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    extend(this._optionsByReference, {\n      animation: true\n    });\n  },\n  $wrapper: function () {\n    return this._$wrapper;\n  },\n  _eventBindingTarget: function () {\n    return this._$content;\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initActions();\n\n    this._initCloseOnOutsideClickHandler();\n\n    this._initTabTerminatorHandler();\n\n    this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\n    this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\n\n    this._initInnerOverlayClass();\n\n    var $element = this.$element();\n\n    this._$wrapper.addClass($element.attr(\"class\"));\n\n    $element.addClass(OVERLAY_CLASS);\n\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n\n    eventsEngine.on(this._$wrapper, \"MSPointerDown\", noop);\n    eventsEngine.on(this._$wrapper, \"focusin\", e => {\n      e.stopPropagation();\n    });\n\n    this._toggleViewPortSubscription(true);\n\n    this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"));\n  },\n  _initOptions: function (options) {\n    this._initTarget(options.target);\n\n    var container = void 0 === options.container ? this.option(\"container\") : options.container;\n\n    this._initContainer(container);\n\n    this.callBase(options);\n  },\n  _initInnerOverlayClass: function () {\n    this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"));\n  },\n  _initTarget: function (target) {\n    if (!isDefined(target)) {\n      return;\n    }\n\n    var options = this.option();\n    each([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], (_, path) => {\n      var pathParts = path.split(\".\");\n      var option = options;\n\n      while (option) {\n        if (1 === pathParts.length) {\n          if (isPlainObject(option)) {\n            option[pathParts.shift()] = target;\n          }\n\n          break;\n        } else {\n          option = option[pathParts.shift()];\n        }\n      }\n    });\n  },\n  _initContainer: function (container) {\n    container = void 0 === container ? viewPort() : container;\n    var $element = this.$element();\n    var $container = $element.closest(container);\n\n    if (!$container.length) {\n      $container = $(container).first();\n    }\n\n    this._$container = $container.length ? $container : $element.parent();\n  },\n  _initHideTopOverlayHandler: function (handler) {\n    this._hideTopOverlayHandler = handler;\n  },\n  _initActions: function () {\n    this._actions = {};\n    each(ACTIONS, (_, action) => {\n      this._actions[action] = this._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || noop;\n    });\n  },\n  _initCloseOnOutsideClickHandler: function () {\n    var that = this;\n\n    this._proxiedDocumentDownHandler = function () {\n      return that._documentDownHandler(...arguments);\n    };\n  },\n  _documentDownHandler: function (e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n\n    var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n    if (isFunction(closeOnOutsideClick)) {\n      closeOnOutsideClick = closeOnOutsideClick(e);\n    }\n\n    var $container = this._$content;\n    var isAttachedTarget = $(window.document).is(e.target) || contains(window.document, e.target);\n    var isInnerOverlay = $(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length;\n    var outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || contains($container.get(0), e.target));\n\n    if (outsideClick && closeOnOutsideClick) {\n      this._outsideClickHandler(e);\n    }\n\n    return this.option(\"propagateOutsideClick\");\n  },\n\n  _outsideClickHandler(e) {\n    if (this.option(\"shading\")) {\n      e.preventDefault();\n    }\n\n    this.hide();\n  },\n\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      content: new EmptyTemplate()\n    });\n\n    this.callBase();\n  },\n  _isTopOverlay: function () {\n    var overlayStack = this._overlayStack();\n\n    for (var i = overlayStack.length - 1; i >= 0; i--) {\n      var tabbableElements = overlayStack[i]._findTabbableBounds();\n\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n\n    return false;\n  },\n  _overlayStack: function () {\n    return OVERLAY_STACK;\n  },\n  _zIndexInitValue: function () {\n    return Overlay.baseZIndex();\n  },\n  _toggleViewPortSubscription: function (toggle) {\n    viewPortChanged.remove(this._viewPortChangeHandle);\n\n    if (toggle) {\n      this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  },\n  _viewPortChangeHandler: function () {\n    this._initContainer(this.option(\"container\"));\n\n    this._refresh();\n  },\n  _renderVisibilityAnimate: function (visible) {\n    this._stopAnimation();\n\n    return visible ? this._show() : this._hide();\n  },\n  _normalizePosition: function () {\n    var position = this.option(\"position\");\n    this._position = \"function\" === typeof position ? position() : position;\n  },\n  _getAnimationConfig: function () {\n    var animation = this.option(\"animation\");\n\n    if (isFunction(animation)) {\n      animation = animation.call(this);\n    }\n\n    return animation;\n  },\n  _show: function () {\n    var that = this;\n    var deferred = new Deferred();\n    this._parentHidden = this._isParentHidden();\n    deferred.done(() => {\n      delete that._parentHidden;\n    });\n\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return deferred.resolve();\n    }\n\n    if (this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = true;\n    this._isShown = false;\n\n    this._normalizePosition();\n\n    var animation = that._getAnimationConfig() || {};\n\n    var showAnimation = this._normalizeAnimation(animation.show, \"to\");\n\n    var startShowAnimation = showAnimation && showAnimation.start || noop;\n    var completeShowAnimation = showAnimation && showAnimation.complete || noop;\n\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n      deferred.resolve();\n    } else {\n      var show = () => {\n        this._renderVisibility(true);\n\n        if (this._isShowingActionCanceled) {\n          delete this._isShowingActionCanceled;\n          deferred.resolve();\n          return;\n        }\n\n        this._animate(showAnimation, function () {\n          if (that.option(\"focusStateEnabled\")) {\n            eventsEngine.trigger(that._focusTarget(), \"focus\");\n          }\n\n          completeShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = false;\n          that._isShown = true;\n\n          that._actions.onShown();\n\n          that._toggleSafariScrolling(false);\n\n          deferred.resolve();\n        }, function () {\n          startShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = true;\n        });\n      };\n\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n\n    return deferred.promise();\n  },\n  _normalizeAnimation: function (animation, prop) {\n    if (animation) {\n      animation = extend({\n        type: \"slide\"\n      }, animation);\n\n      if (animation[prop] && \"object\" === typeof animation[prop]) {\n        extend(animation[prop], {\n          position: this._position\n        });\n      }\n    }\n\n    return animation;\n  },\n  _hide: function () {\n    if (!this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = false;\n    var that = this;\n    var deferred = new Deferred();\n    var animation = that._getAnimationConfig() || {};\n\n    var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\n\n    var startHideAnimation = hideAnimation && hideAnimation.start || noop;\n    var completeHideAnimation = hideAnimation && hideAnimation.complete || noop;\n    var hidingArgs = {\n      cancel: false\n    };\n\n    if (this._isShowingActionCanceled) {\n      deferred.resolve();\n    } else {\n      this._actions.onHiding(hidingArgs);\n\n      that._toggleSafariScrolling(true);\n\n      if (hidingArgs.cancel) {\n        this._isHidingActionCanceled = true;\n        this.option(\"visible\", true);\n        deferred.resolve();\n      } else {\n        this._forceFocusLost();\n\n        this._toggleShading(false);\n\n        this._toggleSubscriptions(false);\n\n        this._stopShowTimer();\n\n        this._animate(hideAnimation, function () {\n          var _that$_actions;\n\n          that._$content.css(\"pointerEvents\", \"\");\n\n          that._renderVisibility(false);\n\n          completeHideAnimation.apply(this, arguments);\n          that._hideAnimationProcessing = false;\n          null === (_that$_actions = that._actions) || void 0 === _that$_actions ? void 0 : _that$_actions.onHidden();\n          deferred.resolve();\n        }, function () {\n          that._$content.css(\"pointerEvents\", \"none\");\n\n          startHideAnimation.apply(this, arguments);\n          that._hideAnimationProcessing = true;\n        });\n      }\n    }\n\n    return deferred.promise();\n  },\n  _forceFocusLost: function () {\n    var activeElement = domAdapter.getActiveElement();\n    var shouldResetActiveElement = !!this._$content.find(activeElement).length;\n\n    if (shouldResetActiveElement) {\n      resetActiveElement();\n    }\n  },\n  _animate: function (animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || noop;\n      fx.animate(this._$content, extend({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  },\n  _stopAnimation: function () {\n    fx.stop(this._$content, true);\n  },\n  _renderVisibility: function (visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n\n    this._currentVisible = visible;\n\n    this._stopAnimation();\n\n    if (!visible) {\n      triggerHidingEvent(this._$content);\n    }\n\n    this._toggleVisibility(visible);\n\n    this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\n\n    this._updateZIndexStackPosition(visible);\n\n    if (visible) {\n      this._renderContent();\n\n      var showingArgs = {\n        cancel: false\n      };\n\n      this._actions.onShowing(showingArgs);\n\n      if (showingArgs.cancel) {\n        this._toggleVisibility(false);\n\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\n\n        this._updateZIndexStackPosition(false);\n\n        this._moveFromContainer();\n\n        this._isShowingActionCanceled = true;\n        this.option(\"visible\", false);\n        return;\n      }\n\n      this._moveToContainer();\n\n      this._renderGeometry();\n\n      triggerShownEvent(this._$content);\n      triggerResizeEvent(this._$content);\n    } else {\n      this._moveFromContainer();\n    }\n\n    this._toggleShading(visible);\n\n    this._toggleSubscriptions(visible);\n  },\n  _updateZIndexStackPosition: function (pushToStack) {\n    var overlayStack = this._overlayStack();\n\n    var index = inArray(this, overlayStack);\n\n    if (pushToStack) {\n      if (-1 === index) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else if (-1 !== index) {\n      overlayStack.splice(index, 1);\n      zIndexPool.remove(this._zIndex);\n    }\n  },\n  _toggleShading: function (visible) {\n    this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\n\n    this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\n\n    this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\n\n    this._toggleTabTerminator(visible && this.option(\"shading\"));\n  },\n  _initTabTerminatorHandler: function () {\n    var that = this;\n\n    this._proxiedTabTerminatorHandler = function () {\n      that._tabKeyHandler(...arguments);\n    };\n  },\n  _toggleTabTerminator: function (enabled) {\n    var eventName = addNamespace(\"keydown\", this.NAME);\n\n    if (enabled) {\n      eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  },\n  _findTabbableBounds: function () {\n    var $elements = this._$wrapper.find(\"*\");\n\n    var elementsCount = $elements.length - 1;\n    var result = {\n      first: null,\n      last: null\n    };\n\n    for (var i = 0; i <= elementsCount; i++) {\n      if (!result.first && $elements.eq(i).is(tabbable)) {\n        result.first = $elements.eq(i);\n      }\n\n      if (!result.last && $elements.eq(elementsCount - i).is(tabbable)) {\n        result.last = $elements.eq(elementsCount - i);\n      }\n\n      if (result.first && result.last) {\n        break;\n      }\n    }\n\n    return result;\n  },\n  _tabKeyHandler: function (e) {\n    if (normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\n      return;\n    }\n\n    var tabbableElements = this._findTabbableBounds();\n\n    var $firstTabbable = tabbableElements.first;\n    var $lastTabbable = tabbableElements.last;\n    var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\n    var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\n    var isEmptyTabList = 0 === tabbableElements.length;\n    var isOutsideTarget = !contains(this._$wrapper.get(0), e.target);\n\n    if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\n      e.preventDefault();\n      var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n      eventsEngine.trigger($focusElement, \"focusin\");\n      eventsEngine.trigger($focusElement, \"focus\");\n    }\n  },\n  _toggleSubscriptions: function (enabled) {\n    if (hasWindow()) {\n      this._toggleHideTopOverlayCallback(enabled);\n\n      this._toggleParentsScrollSubscription(enabled);\n    }\n  },\n  _toggleHideTopOverlayCallback: function (subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n\n    if (subscribe) {\n      hideTopOverlayCallback.add(this._hideTopOverlayHandler);\n    } else {\n      hideTopOverlayCallback.remove(this._hideTopOverlayHandler);\n    }\n  },\n  _toggleParentsScrollSubscription: function (subscribe) {\n    if (!this._position) {\n      return;\n    }\n\n    var target = this._position.of || $();\n    var closeOnScroll = this.option(\"closeOnTargetScroll\");\n    var $parents = getElement(target).parents();\n    var scrollEvent = addNamespace(\"scroll\", this.NAME);\n\n    if (\"desktop\" === devices.real().deviceType) {\n      $parents = $parents.add(window);\n    }\n\n    this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || (e => {\n      this._targetParentsScrollHandler(e);\n    });\n\n    eventsEngine.off($().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\n\n    if (subscribe && closeOnScroll) {\n      eventsEngine.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\n      this._$prevTargetParents = $parents;\n    }\n  },\n  _targetParentsScrollHandler: function (e) {\n    var closeHandled = false;\n    var closeOnScroll = this.option(\"closeOnTargetScroll\");\n\n    if (isFunction(closeOnScroll)) {\n      closeHandled = closeOnScroll(e);\n    }\n\n    if (!closeHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  },\n  _render: function () {\n    this.callBase();\n\n    this._appendContentToElement();\n\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  },\n  _appendContentToElement: function () {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  },\n  _renderContent: function () {\n    var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n\n    var isParentHidden = this.option(\"visible\") && this._isParentHidden();\n\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n\n    this._contentAlreadyRendered = true;\n\n    this._appendContentToElement();\n\n    this.callBase();\n  },\n  _isParentHidden: function () {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n\n    var $parent = this.$element().parent();\n\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n\n    var isHidden = false;\n    $parent.add($parent.parents()).each(function () {\n      var $element = $(this);\n\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !domAdapter.getBody().contains($parent.get(0));\n  },\n  _renderContentImpl: function () {\n    var whenContentRendered = new Deferred();\n    var contentTemplateOption = this.option(\"contentTemplate\");\n\n    var contentTemplate = this._getTemplate(contentTemplateOption);\n\n    var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\n    contentTemplate && contentTemplate.render({\n      container: getPublicElement(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: () => {\n        whenContentRendered.resolve();\n      }\n    });\n\n    this._renderDrag();\n\n    this._renderResize();\n\n    this._renderScrollTerminator();\n\n    whenContentRendered.done(() => {\n      if (this.option(\"visible\")) {\n        this._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  },\n  _renderDrag: function () {\n    var $dragTarget = this._getDragTarget();\n\n    if (!$dragTarget) {\n      return;\n    }\n\n    var startEventName = addNamespace(dragEventStart, this.NAME);\n    var updateEventName = addNamespace(dragEventMove, this.NAME);\n    eventsEngine.off($dragTarget, startEventName);\n    eventsEngine.off($dragTarget, updateEventName);\n\n    if (!this.option(\"dragEnabled\")) {\n      return;\n    }\n\n    eventsEngine.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\n    eventsEngine.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this));\n  },\n  _renderResize: function () {\n    this._resizable = this._createComponent(this._$content, Resizable, {\n      handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\n      onResizeEnd: this._resizeEndHandler.bind(this),\n      onResize: this._actions.onResize.bind(this),\n      onResizeStart: this._actions.onResizeStart.bind(this),\n      minHeight: 100,\n      minWidth: 100,\n      area: this._getDragResizeContainer()\n    });\n  },\n  _resizeEndHandler: function () {\n    this._positionChangeHandled = true;\n\n    var width = this._resizable.option(\"width\");\n\n    var height = this._resizable.option(\"height\");\n\n    width && this.option(\"width\", width);\n    height && this.option(\"height\", height);\n\n    this._actions.onResizeEnd();\n  },\n  _renderScrollTerminator: function () {\n    var $scrollTerminator = this._$wrapper;\n    var terminatorEventName = addNamespace(dragEventMove, this.NAME);\n    eventsEngine.off($scrollTerminator, terminatorEventName);\n    eventsEngine.on($scrollTerminator, terminatorEventName, {\n      validate: function () {\n        return true;\n      },\n      getDirection: function () {\n        return \"both\";\n      },\n      _toggleGestureCover: function (toggle) {\n        if (!toggle) {\n          this._toggleGestureCoverImpl(toggle);\n        }\n      },\n      _clearSelection: noop,\n      isNative: true\n    }, e => {\n      var originalEvent = e.originalEvent.originalEvent;\n      var {\n        type: type\n      } = originalEvent || {};\n      var isWheel = \"wheel\" === type;\n      var isMouseMove = \"mousemove\" === type;\n      var isScrollByWheel = isWheel && !isCommandKeyPressed(e);\n      e._cancelPreventDefault = true;\n\n      if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\n        e.preventDefault();\n      }\n    });\n  },\n  _getDragTarget: function () {\n    return this.$content();\n  },\n  _dragStartHandler: function (e) {\n    e.targetElements = [];\n    this._prevOffset = {\n      x: 0,\n      y: 0\n    };\n\n    var allowedOffsets = this._allowedOffsets();\n\n    e.maxTopOffset = allowedOffsets.top;\n    e.maxBottomOffset = allowedOffsets.bottom;\n    e.maxLeftOffset = allowedOffsets.left;\n    e.maxRightOffset = allowedOffsets.right;\n  },\n  _getDragResizeContainer: function () {\n    var isContainerDefined = originalViewPort().get(0) || this.option(\"container\");\n    var $container = !isContainerDefined ? $(window) : this._$container;\n    return $container;\n  },\n  _deltaSize: function () {\n    var $content = this._$content;\n\n    var $container = this._getDragResizeContainer();\n\n    var contentWidth = $content.outerWidth();\n    var contentHeight = $content.outerHeight();\n    var containerWidth = $container.outerWidth();\n    var containerHeight = $container.outerHeight();\n\n    if (this._isWindow($container)) {\n      var document = domAdapter.getDocument();\n      var fullPageHeight = Math.max($(document).outerHeight(), containerHeight);\n      var fullPageWidth = Math.max($(document).outerWidth(), containerWidth);\n      containerHeight = fullPageHeight;\n      containerWidth = fullPageWidth;\n    }\n\n    return {\n      width: containerWidth - contentWidth,\n      height: containerHeight - contentHeight\n    };\n  },\n  _dragUpdateHandler: function (e) {\n    var offset = e.offset;\n    var prevOffset = this._prevOffset;\n    var targetOffset = {\n      top: offset.y - prevOffset.y,\n      left: offset.x - prevOffset.x\n    };\n\n    this._changePosition(targetOffset);\n\n    this._prevOffset = offset;\n  },\n  _changePosition: function (offset) {\n    var position = locate(this._$content);\n    move(this._$content, {\n      left: position.left + offset.left,\n      top: position.top + offset.top\n    });\n    this._positionChangeHandled = true;\n  },\n  _allowedOffsets: function () {\n    var position = locate(this._$content);\n\n    var deltaSize = this._deltaSize();\n\n    var isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0;\n    var shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? locate(this._$wrapper) : {\n      top: 0,\n      left: 0\n    };\n    var boundaryOffset = this.option(\"boundaryOffset\");\n    return {\n      top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\n      bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\n      left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\n      right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\n    };\n  },\n  _moveFromContainer: function () {\n    this._$content.appendTo(this.$element());\n\n    this._detachWrapperToContainer();\n  },\n  _detachWrapperToContainer: function () {\n    this._$wrapper.detach();\n  },\n  _moveToContainer: function () {\n    this._attachWrapperToContainer();\n\n    this._$content.appendTo(this._$wrapper);\n  },\n  _attachWrapperToContainer: function () {\n    var $element = this.$element();\n    var containerDefined = void 0 !== this.option(\"container\");\n    var renderContainer = containerDefined ? this._$container : swatch.getSwatchContainer($element);\n\n    if (renderContainer && renderContainer[0] === $element.parent()[0]) {\n      renderContainer = $element;\n    }\n\n    this._$wrapper.appendTo(renderContainer);\n  },\n  _fixHeightAfterSafariAddressBarResizing: function () {\n    if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\n      this._$wrapper.css(\"minHeight\", window.innerHeight);\n    }\n  },\n  _renderGeometry: function (isDimensionChanged) {\n    if (this.option(\"visible\") && hasWindow()) {\n      this._renderGeometryImpl(isDimensionChanged);\n    }\n  },\n  _renderGeometryImpl: function (isDimensionChanged) {\n    this._stopAnimation();\n\n    this._normalizePosition();\n\n    this._renderWrapper();\n\n    this._fixHeightAfterSafariAddressBarResizing();\n\n    this._renderDimensions();\n\n    var resultPosition = this._renderPosition();\n\n    this._actions.onPositioned({\n      position: resultPosition\n    });\n  },\n  _fixWrapperPosition: function () {\n    this._$wrapper.css(\"position\", this._useFixedPosition() ? \"fixed\" : \"absolute\");\n  },\n  _useFixedPosition: function () {\n    return this._shouldFixBodyPosition() || this.option(\"_fixedPosition\");\n  },\n  _shouldFixBodyPosition: function () {\n    var $container = this._getContainer();\n\n    return this._isWindow($container) && (!iOS || void 0 !== this._bodyScrollTop);\n  },\n  _toggleSafariScrolling: function (scrollingEnabled) {\n    if (iOS && this._shouldFixBodyPosition()) {\n      var body = domAdapter.getBody();\n\n      if (scrollingEnabled) {\n        $(body).removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        window.scrollTo(0, this._bodyScrollTop);\n        this._bodyScrollTop = void 0;\n      } else if (this.option(\"visible\")) {\n        this._bodyScrollTop = window.pageYOffset;\n        $(body).addClass(PREVENT_SAFARI_SCROLLING_CLASS);\n      }\n    }\n  },\n  _renderWrapper: function () {\n    this._fixWrapperPosition();\n\n    this._renderWrapperDimensions();\n\n    this._renderWrapperPosition();\n  },\n  _renderWrapperDimensions: function () {\n    var wrapperWidth;\n    var wrapperHeight;\n\n    var $container = this._getContainer();\n\n    if (!$container) {\n      return;\n    }\n\n    var isWindow = this._isWindow($container);\n\n    wrapperWidth = isWindow ? \"\" : $container.outerWidth(), wrapperHeight = isWindow ? \"\" : $container.outerHeight();\n\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  },\n  _isWindow: function ($element) {\n    return !!$element && isWindow($element.get(0));\n  },\n  _renderWrapperPosition: function () {\n    var $container = this._getContainer();\n\n    if ($container) {\n      positionUtils.setup(this._$wrapper, {\n        my: \"top left\",\n        at: \"top left\",\n        of: $container\n      });\n    }\n  },\n  _getContainer: function () {\n    var position = this._position;\n    var container = this.option(\"container\");\n    var positionOf = null;\n\n    if (!container && position) {\n      positionOf = isEvent(position.of) ? window : position.of || window;\n    }\n\n    return getElement(container || positionOf);\n  },\n  _renderDimensions: function () {\n    var content = this._$content.get(0);\n\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  },\n  _renderPosition: function () {\n    if (this._positionChangeHandled) {\n      var allowedOffsets = this._allowedOffsets();\n\n      this._changePosition({\n        top: fitIntoRange(0, -allowedOffsets.top, allowedOffsets.bottom),\n        left: fitIntoRange(0, -allowedOffsets.left, allowedOffsets.right)\n      });\n    } else {\n      this._renderOverlayBoundaryOffset();\n\n      resetPosition(this._$content);\n\n      var position = this._transformStringPosition(this._position, POSITION_ALIASES);\n\n      var resultPosition = positionUtils.setup(this._$content, position);\n      forceRepaint(this._$content);\n      return resultPosition;\n    }\n  },\n  _transformStringPosition: function (position, positionAliases) {\n    if (isString(position)) {\n      position = extend({}, positionAliases[position]);\n    }\n\n    return position;\n  },\n  _renderOverlayBoundaryOffset: function () {\n    var boundaryOffset = this.option(\"boundaryOffset\");\n\n    this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\");\n  },\n  _focusTarget: function () {\n    return this._$content;\n  },\n  _attachKeyboardEvents: function () {\n    this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts));\n  },\n  _keyboardHandler: function (options) {\n    var e = options.originalEvent;\n    var $target = $(e.target);\n\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      this.callBase(...arguments);\n    }\n  },\n  _isVisible: function () {\n    return this.option(\"visible\");\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  },\n  _dimensionChanged: function () {\n    this._renderGeometry(true);\n  },\n  _clean: function () {\n    if (!this._contentAlreadyRendered) {\n      this.$content().empty();\n    }\n\n    this._renderVisibility(false);\n\n    this._stopShowTimer();\n\n    this._cleanFocusState();\n  },\n\n  _stopShowTimer() {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n\n    this._asyncShowTimeout = null;\n  },\n\n  _dispose: function () {\n    fx.stop(this._$content, false);\n    clearTimeout(this._deferShowTimer);\n\n    this._toggleViewPortSubscription(false);\n\n    this._toggleSubscriptions(false);\n\n    this._updateZIndexStackPosition(false);\n\n    this._toggleTabTerminator(false);\n\n    this._toggleSafariScrolling(true);\n\n    this._actions = null;\n    this.callBase();\n    zIndexPool.remove(this._zIndex);\n\n    this._$wrapper.remove();\n\n    this._$content.remove();\n  },\n  _toggleDisabledState: function (value) {\n    this.callBase(...arguments);\n\n    this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value));\n  },\n  _toggleRTLDirection: function (rtl) {\n    this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl);\n  },\n  _optionChanged: function (args) {\n    var value = args.value;\n\n    if (inArray(args.name, ACTIONS) > -1) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"dragEnabled\":\n        this._renderDrag();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"resizeEnabled\":\n        this._renderResize();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"shading\":\n      case \"shadingColor\":\n        this._toggleShading(this.option(\"visible\"));\n\n        break;\n\n      case \"width\":\n      case \"height\":\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n      case \"boundaryOffset\":\n        this._renderGeometry();\n\n        break;\n\n      case \"position\":\n        this._positionChangeHandled = false;\n\n        this._renderGeometry();\n\n        break;\n\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(() => {\n          if (!this._animateDeferred) {\n            return;\n          }\n\n          this._animateDeferred.resolveWith(this);\n        });\n\n        break;\n\n      case \"target\":\n        this._initTarget(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"container\":\n        this._initContainer(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n\n        break;\n\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n\n        this._clean();\n\n        this._invalidate();\n\n        break;\n\n      case \"hideTopOverlayHandler\":\n        this._toggleHideTopOverlayCallback(false);\n\n        this._initHideTopOverlayHandler(args.value);\n\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnTargetScroll\":\n        this._toggleParentsScrollSubscription(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnOutsideClick\":\n      case \"animation\":\n      case \"propagateOutsideClick\":\n        break;\n\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        this.callBase(args);\n        break;\n\n      case \"_fixedPosition\":\n        this._fixWrapperPosition();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  toggle: function (showing) {\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n    var result = new Deferred();\n\n    if (showing === this.option(\"visible\")) {\n      return result.resolveWith(this, [showing]).promise();\n    }\n\n    var animateDeferred = new Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    animateDeferred.promise().done(() => {\n      delete this._animateDeferred;\n      result.resolveWith(this, [this.option(\"visible\")]);\n    });\n    return result.promise();\n  },\n  $content: function () {\n    return this._$content;\n  },\n  show: function () {\n    return this.toggle(true);\n  },\n  hide: function () {\n    return this.toggle(false);\n  },\n  content: function () {\n    return getPublicElement(this._$content);\n  },\n  repaint: function () {\n    if (this._contentAlreadyRendered) {\n      this._renderGeometry();\n\n      triggerResizeEvent(this._$content);\n    } else {\n      this.callBase();\n    }\n  }\n});\n\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\n\nregisterComponent(\"dxOverlay\", Overlay);\nexport default Overlay;","map":{"version":3,"sources":["/home/mukulsharma/Desktop/CyAmast/PortIntel/dashApp/node_modules/devextreme/esm/ui/overlay/ui.overlay.js"],"names":["fx","positionUtils","locate","move","resetPosition","registerComponent","devices","domAdapter","getPublicElement","$","EmptyTemplate","inArray","browser","noop","Deferred","contains","resetActiveElement","extend","each","fitIntoRange","readyCallbacks","isString","isDefined","isFunction","isPlainObject","isWindow","isEvent","changeCallback","originalViewPort","value","viewPort","getWindow","hasWindow","eventsEngine","start","dragEventStart","dragEventMove","pointerEvents","keyboard","addNamespace","isCommandKeyPressed","normalizeKeyName","triggerHidingEvent","triggerResizeEvent","triggerShownEvent","hideCallback","hideTopOverlayCallback","Resizable","tabbable","swatch","Widget","zIndexPool","ready","add","window","viewPortChanged","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","OVERLAY_MODAL_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","ACTIONS","OVERLAY_STACK","DISABLED_STATE_CLASS","PREVENT_SAFARI_SCROLLING_CLASS","TAB_KEY","POSITION_ALIASES","top","my","at","bottom","right","left","center","realDevice","real","firefoxDesktop","mozilla","deviceType","iOS","platform","hasSafariAddressBar","safari","forceRepaint","$element","width","getElement","target","subscribeGlobal","getDocument","down","e","i","length","_proxiedDocumentDownHandler","Overlay","inherit","_supportedKeys","option","preventDefault","stopPropagation","allowedOffsets","_allowedOffsets","offset","_changePosition","callBase","escape","hide","upArrow","bind","downArrow","leftArrow","rightArrow","_getDefaultOptions","activeStateEnabled","visible","deferRendering","shading","shadingColor","position","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","to","opacity","closeOnOutsideClick","onShowing","onShown","onHiding","onHidden","contentTemplate","dragEnabled","resizeEnabled","onResizeStart","onResize","onResizeEnd","innerOverlay","container","hideTopOverlayHandler","closeOnTargetScroll","onPositioned","boundaryOffset","h","v","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_fixedPosition","_defaultOptionsRules","concat","device","options","_setOptionsByReference","_optionsByReference","$wrapper","_$wrapper","_eventBindingTarget","_$content","_init","_initActions","_initCloseOnOutsideClickHandler","_initTabTerminatorHandler","addClass","_initInnerOverlayClass","attr","on","_toggleViewPortSubscription","_initHideTopOverlayHandler","_initOptions","_initTarget","_initContainer","toggleClass","_","path","pathParts","split","shift","$container","closest","first","_$container","parent","handler","_hideTopOverlayHandler","_actions","action","_createActionByOption","excludeValidators","that","_documentDownHandler","arguments","_showAnimationProcessing","_stopAnimation","isAttachedTarget","document","is","isInnerOverlay","outsideClick","get","_outsideClickHandler","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","content","_isTopOverlay","overlayStack","_overlayStack","tabbableElements","_findTabbableBounds","last","_zIndexInitValue","baseZIndex","toggle","remove","_viewPortChangeHandle","_viewPortChangeHandler","_refresh","_renderVisibilityAnimate","_show","_hide","_normalizePosition","_position","_getAnimationConfig","call","deferred","_parentHidden","_isParentHidden","done","_isHidden","resolve","_currentVisible","promise","_isShown","showAnimation","_normalizeAnimation","startShowAnimation","completeShowAnimation","complete","_isHidingActionCanceled","_renderVisibility","_isShowingActionCanceled","_animate","trigger","_focusTarget","apply","_toggleSafariScrolling","_stopShowTimer","_asyncShowTimeout","setTimeout","prop","hideAnimation","startHideAnimation","completeHideAnimation","hidingArgs","cancel","_forceFocusLost","_toggleShading","_toggleSubscriptions","_that$_actions","css","_hideAnimationProcessing","activeElement","getActiveElement","shouldResetActiveElement","find","completeCallback","startCallback","animate","stop","_toggleVisibility","_updateZIndexStackPosition","_renderContent","showingArgs","_moveFromContainer","_moveToContainer","_renderGeometry","pushToStack","index","_zIndex","create","push","splice","_toggleTabTerminator","_proxiedTabTerminatorHandler","_tabKeyHandler","enabled","eventName","NAME","off","$elements","elementsCount","result","eq","$firstTabbable","$lastTabbable","isTabOnLast","shiftKey","isShiftTabOnFirst","isEmptyTabList","isOutsideTarget","$focusElement","_toggleHideTopOverlayCallback","_toggleParentsScrollSubscription","subscribe","of","closeOnScroll","$parents","parents","scrollEvent","_proxiedTargetParentsScrollHandler","_targetParentsScrollHandler","_$prevTargetParents","closeHandled","_render","_appendContentToElement","appendTo","shouldDeferRendering","isParentHidden","_contentAlreadyRendered","$parent","isHidden","getBody","_renderContentImpl","whenContentRendered","contentTemplateOption","_getTemplate","transclude","anonymousTemplateName","render","$content","noModel","onRendered","_renderDrag","_renderResize","_renderScrollTerminator","$dragTarget","_getDragTarget","startEventName","updateEventName","_dragStartHandler","_dragUpdateHandler","_resizable","_createComponent","handles","_resizeEndHandler","area","_getDragResizeContainer","_positionChangeHandled","$scrollTerminator","terminatorEventName","validate","getDirection","_toggleGestureCover","_toggleGestureCoverImpl","_clearSelection","isNative","originalEvent","isWheel","isMouseMove","isScrollByWheel","_cancelPreventDefault","cancelable","targetElements","_prevOffset","x","y","maxTopOffset","maxBottomOffset","maxLeftOffset","maxRightOffset","isContainerDefined","_deltaSize","contentWidth","outerWidth","contentHeight","outerHeight","containerWidth","containerHeight","_isWindow","fullPageHeight","Math","max","fullPageWidth","prevOffset","targetOffset","deltaSize","isAllowedDrag","shaderOffset","_getContainer","_detachWrapperToContainer","detach","_attachWrapperToContainer","containerDefined","renderContainer","getSwatchContainer","_fixHeightAfterSafariAddressBarResizing","innerHeight","isDimensionChanged","_renderGeometryImpl","_renderWrapper","_renderDimensions","resultPosition","_renderPosition","_fixWrapperPosition","_useFixedPosition","_shouldFixBodyPosition","_bodyScrollTop","scrollingEnabled","body","removeClass","scrollTo","pageYOffset","_renderWrapperDimensions","_renderWrapperPosition","wrapperWidth","wrapperHeight","setup","positionOf","_getOptionValue","_renderOverlayBoundaryOffset","_transformStringPosition","positionAliases","_attachKeyboardEvents","_keyboardListenerId","opts","_keyboardHandler","$target","_isVisible","_visibilityChanged","_dimensionChanged","_clean","empty","_cleanFocusState","clearTimeout","_dispose","_deferShowTimer","_toggleDisabledState","Boolean","_toggleRTLDirection","rtl","_optionChanged","args","name","_animateDeferred","resolveWith","_invalidate","showing","animateDeferred","repaint","zIndex","base"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,EAAP,MAAe,oBAAf;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,SACIC,MADJ,EAEIC,IAFJ,EAGIC,aAHJ,QAIO,4BAJP;AAKA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,SACIC,gBADJ,QAEO,oBAFP;AAGA,OAAOC,CAAP,MAAc,qBAAd;AACA,SACIC,aADJ,QAEO,qCAFP;AAGA,SACIC,OADJ,QAEO,wBAFP;AAGA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SACIC,IADJ,QAEO,yBAFP;AAGA,SACIC,QADJ,QAEO,2BAFP;AAGA,SACIC,QADJ,EAEIC,kBAFJ,QAGO,sBAHP;AAIA,SACIC,MADJ,QAEO,yBAFP;AAGA,SACIC,IADJ,QAEO,2BAFP;AAGA,SACIC,YADJ,QAEO,uBAFP;AAGA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,SACIC,QADJ,EAEIC,SAFJ,EAGIC,UAHJ,EAIIC,aAJJ,EAKIC,QALJ,EAMIC,OANJ,QAOO,uBAPP;AAQA,SACIC,cADJ,EAEIC,gBAFJ,EAGIC,KAAK,IAAIC,QAHb,QAIO,4BAJP;AAKA,SACIC,SADJ,EAEIC,SAFJ,QAGO,yBAHP;AAIA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SACIC,KAAK,IAAIC,cADb,EAEIhC,IAAI,IAAIiC,aAFZ,QAGO,mBAHP;AAIA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,SACIC,QADJ,QAEO,oBAFP;AAGA,SACIC,YADJ,EAEIC,mBAFJ,EAGIC,gBAHJ,QAIO,0BAJP;AAKA,SACIC,kBADJ,EAEIC,kBAFJ,EAGIC,iBAHJ,QAIO,gCAJP;AAKA,SACIC,YAAY,IAAIC,sBADpB,QAEO,4BAFP;AAGA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SACIC,QADJ,QAEO,qBAFP;AAGA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAO,KAAKC,UAAZ,MAA4B,WAA5B;AACA,IAAIC,KAAK,GAAGhC,cAAc,CAACiC,GAA3B;AACA,IAAIC,MAAM,GAAGvB,SAAS,EAAtB;AACA,IAAIwB,eAAe,GAAG5B,cAAtB;AACA,IAAI6B,aAAa,GAAG,YAApB;AACA,IAAIC,qBAAqB,GAAG,oBAA5B;AACA,IAAIC,qBAAqB,GAAG,oBAA5B;AACA,IAAIC,oBAAoB,GAAG,mBAA3B;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,qBAAqB,GAAG,oBAA5B;AACA,IAAIC,uBAAuB,GAAG,SAA9B;AACA,IAAIC,mBAAmB,GAAG,QAA1B;AACA,IAAIC,OAAO,GAAG,CAAC,WAAD,EAAc,SAAd,EAAyB,UAAzB,EAAqC,UAArC,EAAiD,cAAjD,EAAiE,eAAjE,EAAkF,UAAlF,EAA8F,aAA9F,CAAd;AACA,IAAIC,aAAa,GAAG,EAApB;AACA,IAAIC,oBAAoB,GAAG,mBAA3B;AACA,IAAIC,8BAA8B,GAAG,6BAArC;AACA,IAAIC,OAAO,GAAG,KAAd;AACA,IAAIC,gBAAgB,GAAG;AACnBC,EAAAA,GAAG,EAAE;AACDC,IAAAA,EAAE,EAAE,YADH;AAEDC,IAAAA,EAAE,EAAE;AAFH,GADc;AAKnBC,EAAAA,MAAM,EAAE;AACJF,IAAAA,EAAE,EAAE,eADA;AAEJC,IAAAA,EAAE,EAAE;AAFA,GALW;AASnBE,EAAAA,KAAK,EAAE;AACHH,IAAAA,EAAE,EAAE,cADD;AAEHC,IAAAA,EAAE,EAAE;AAFD,GATY;AAanBG,EAAAA,IAAI,EAAE;AACFJ,IAAAA,EAAE,EAAE,aADF;AAEFC,IAAAA,EAAE,EAAE;AAFF,GAba;AAiBnBI,EAAAA,MAAM,EAAE;AACJL,IAAAA,EAAE,EAAE,QADA;AAEJC,IAAAA,EAAE,EAAE;AAFA,GAjBW;AAqBnB,kBAAgB;AACZD,IAAAA,EAAE,EAAE,cADQ;AAEZC,IAAAA,EAAE,EAAE;AAFQ,GArBG;AAyBnB,eAAa;AACTD,IAAAA,EAAE,EAAE,WADK;AAETC,IAAAA,EAAE,EAAE;AAFK,GAzBM;AA6BnB,iBAAe;AACXD,IAAAA,EAAE,EAAE,aADO;AAEXC,IAAAA,EAAE,EAAE;AAFO,GA7BI;AAiCnB,cAAY;AACRD,IAAAA,EAAE,EAAE,UADI;AAERC,IAAAA,EAAE,EAAE;AAFI;AAjCO,CAAvB;AAsCA,IAAIK,UAAU,GAAGxE,OAAO,CAACyE,IAAR,EAAjB;AACA,IAAIC,cAAc,GAAGpE,OAAO,CAACqE,OAAR,IAAmB,cAAcH,UAAU,CAACI,UAAjE;AACA,IAAIC,GAAG,GAAG,UAAUL,UAAU,CAACM,QAA/B;AACA,IAAIC,mBAAmB,GAAGzE,OAAO,CAAC0E,MAAR,IAAkB,cAAcR,UAAU,CAACI,UAArE;;AACA,IAAIK,YAAY,GAAGC,QAAQ,IAAI;AAC3B,MAAIR,cAAJ,EAAoB;AAChBQ,IAAAA,QAAQ,CAACC,KAAT;AACH;AACJ,CAJD;;AAKA,IAAIC,UAAU,GAAG7D,KAAK,IAAI;AACtB,MAAIH,OAAO,CAACG,KAAD,CAAX,EAAoB;AAChBA,IAAAA,KAAK,GAAGA,KAAK,CAAC8D,MAAd;AACH;;AACD,SAAOlF,CAAC,CAACoB,KAAD,CAAR;AACH,CALD;;AAMAuB,KAAK,CAAC,MAAM;AACRnB,EAAAA,YAAY,CAAC2D,eAAb,CAA6BrF,UAAU,CAACsF,WAAX,EAA7B,EAAuDxD,aAAa,CAACyD,IAArE,EAA2EC,CAAC,IAAI;AAC5E,SAAK,IAAIC,CAAC,GAAG9B,aAAa,CAAC+B,MAAd,GAAuB,CAApC,EAAuCD,CAAC,IAAI,CAA5C,EAA+CA,CAAC,EAAhD,EAAoD;AAChD,UAAI,CAAC9B,aAAa,CAAC8B,CAAD,CAAb,CAAiBE,2BAAjB,CAA6CH,CAA7C,CAAL,EAAsD;AAClD;AACH;AACJ;AACJ,GAND;AAOH,CARI,CAAL;AASA,IAAII,OAAO,GAAGjD,MAAM,CAACkD,OAAP,CAAe;AACzBC,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAIlG,IAAI,GAAG,UAASoE,GAAT,EAAcK,IAAd,EAAoBmB,CAApB,EAAuB;AAC9B,UAAI,CAAC,KAAKO,MAAL,CAAY,aAAZ,CAAL,EAAiC;AAC7B;AACH;;AACDP,MAAAA,CAAC,CAACQ,cAAF;AACAR,MAAAA,CAAC,CAACS,eAAF;;AACA,UAAIC,cAAc,GAAG,KAAKC,eAAL,EAArB;;AACA,UAAIC,MAAM,GAAG;AACTpC,QAAAA,GAAG,EAAEpD,YAAY,CAACoD,GAAD,EAAM,CAACkC,cAAc,CAAClC,GAAtB,EAA2BkC,cAAc,CAAC/B,MAA1C,CADR;AAETE,QAAAA,IAAI,EAAEzD,YAAY,CAACyD,IAAD,EAAO,CAAC6B,cAAc,CAAC7B,IAAvB,EAA6B6B,cAAc,CAAC9B,KAA5C;AAFT,OAAb;;AAIA,WAAKiC,eAAL,CAAqBD,MAArB;AACH,KAZD;;AAaA,WAAO1F,MAAM,CAAC,KAAK4F,QAAL,EAAD,EAAkB;AAC3BC,MAAAA,MAAM,EAAE,YAAW;AACf,aAAKC,IAAL;AACH,OAH0B;AAI3BC,MAAAA,OAAO,EAAE7G,IAAI,CAAC8G,IAAL,CAAU,IAAV,EAAgB,CAAC,CAAjB,EAAoB,CAApB,CAJkB;AAK3BC,MAAAA,SAAS,EAAE/G,IAAI,CAAC8G,IAAL,CAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAnB,CALgB;AAM3BE,MAAAA,SAAS,EAAEhH,IAAI,CAAC8G,IAAL,CAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAC,CAApB,CANgB;AAO3BG,MAAAA,UAAU,EAAEjH,IAAI,CAAC8G,IAAL,CAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAnB;AAPe,KAAlB,CAAb;AASH,GAxBwB;AAyBzBI,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAOpG,MAAM,CAAC,KAAK4F,QAAL,EAAD,EAAkB;AAC3BS,MAAAA,kBAAkB,EAAE,KADO;AAE3BC,MAAAA,OAAO,EAAE,KAFkB;AAG3BC,MAAAA,cAAc,EAAE,IAHW;AAI3BC,MAAAA,OAAO,EAAE,IAJkB;AAK3BC,MAAAA,YAAY,EAAE,EALa;AAM3BC,MAAAA,QAAQ,EAAE;AACNnD,QAAAA,EAAE,EAAE,QADE;AAENC,QAAAA,EAAE,EAAE;AAFE,OANiB;AAU3BgB,MAAAA,KAAK,EAAE,YAAW;AACd,eAAO,KAAKhF,CAAC,CAAC6C,MAAD,CAAD,CAAUmC,KAAV,EAAZ;AACH,OAZ0B;AAa3BmC,MAAAA,QAAQ,EAAE,IAbiB;AAc3BC,MAAAA,QAAQ,EAAE,IAdiB;AAe3BC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,KAAKrH,CAAC,CAAC6C,MAAD,CAAD,CAAUwE,MAAV,EAAZ;AACH,OAjB0B;AAkB3BC,MAAAA,SAAS,EAAE,IAlBgB;AAmB3BC,MAAAA,SAAS,EAAE,IAnBgB;AAoB3BC,MAAAA,SAAS,EAAE;AACPC,QAAAA,IAAI,EAAE;AACFC,UAAAA,IAAI,EAAE,KADJ;AAEFC,UAAAA,QAAQ,EAAE,GAFR;AAGFC,UAAAA,IAAI,EAAE;AACFC,YAAAA,KAAK,EAAE;AADL;AAHJ,SADC;AAQPvB,QAAAA,IAAI,EAAE;AACFoB,UAAAA,IAAI,EAAE,KADJ;AAEFC,UAAAA,QAAQ,EAAE,GAFR;AAGFG,UAAAA,EAAE,EAAE;AACAC,YAAAA,OAAO,EAAE,CADT;AAEAF,YAAAA,KAAK,EAAE;AAFP,WAHF;AAOFD,UAAAA,IAAI,EAAE;AACFG,YAAAA,OAAO,EAAE,CADP;AAEFF,YAAAA,KAAK,EAAE;AAFL;AAPJ;AARC,OApBgB;AAyC3BG,MAAAA,mBAAmB,EAAE,KAzCM;AA0C3BC,MAAAA,SAAS,EAAE,IA1CgB;AA2C3BC,MAAAA,OAAO,EAAE,IA3CkB;AA4C3BC,MAAAA,QAAQ,EAAE,IA5CiB;AA6C3BC,MAAAA,QAAQ,EAAE,IA7CiB;AA8C3BC,MAAAA,eAAe,EAAE,SA9CU;AA+C3BC,MAAAA,WAAW,EAAE,KA/Cc;AAgD3BC,MAAAA,aAAa,EAAE,KAhDY;AAiD3BC,MAAAA,aAAa,EAAE,IAjDY;AAkD3BC,MAAAA,QAAQ,EAAE,IAlDiB;AAmD3BC,MAAAA,WAAW,EAAE,IAnDc;AAoD3BC,MAAAA,YAAY,EAAE,KApDa;AAqD3BzD,MAAAA,MAAM,EAAE,KAAK,CArDc;AAsD3B0D,MAAAA,SAAS,EAAE,KAAK,CAtDW;AAuD3BC,MAAAA,qBAAqB,EAAE,MAAM;AACzB,aAAKvC,IAAL;AACH,OAzD0B;AA0D3BwC,MAAAA,mBAAmB,EAAE,KA1DM;AA2D3BC,MAAAA,YAAY,EAAE,IA3Da;AA4D3BC,MAAAA,cAAc,EAAE;AACZC,QAAAA,CAAC,EAAE,CADS;AAEZC,QAAAA,CAAC,EAAE;AAFS,OA5DW;AAgE3BC,MAAAA,qBAAqB,EAAE,KAhEI;AAiE3BC,MAAAA,iBAAiB,EAAE,IAjEQ;AAkE3BC,MAAAA,sBAAsB,EAAE,IAlEG;AAmE3BC,MAAAA,cAAc,EAAE;AAnEW,KAAlB,CAAb;AAqEH,GA/FwB;AAgGzBC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,WAAO,KAAKnD,QAAL,GAAgBoD,MAAhB,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,CAAClI,SAAS,EAAjB;AACH,OAH0B;AAI3BmI,MAAAA,OAAO,EAAE;AACL1E,QAAAA,KAAK,EAAE,IADF;AAELqC,QAAAA,MAAM,EAAE,IAFH;AAGLG,QAAAA,SAAS,EAAE,IAHN;AAIL6B,QAAAA,sBAAsB,EAAE;AAJnB;AAJkB,KAAD,CAAvB,CAAP;AAWH,GA5GwB;AA6GzBM,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKvD,QAAL;AACA5F,IAAAA,MAAM,CAAC,KAAKoJ,mBAAN,EAA2B;AAC7BpC,MAAAA,SAAS,EAAE;AADkB,KAA3B,CAAN;AAGH,GAlHwB;AAmHzBqC,EAAAA,QAAQ,EAAE,YAAW;AACjB,WAAO,KAAKC,SAAZ;AACH,GArHwB;AAsHzBC,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,WAAO,KAAKC,SAAZ;AACH,GAxHwB;AAyHzBC,EAAAA,KAAK,EAAE,YAAW;AACd,SAAK7D,QAAL;;AACA,SAAK8D,YAAL;;AACA,SAAKC,+BAAL;;AACA,SAAKC,yBAAL;;AACA,SAAKN,SAAL,GAAiB9J,CAAC,CAAC,OAAD,CAAD,CAAWqK,QAAX,CAAoBrH,qBAApB,CAAjB;AACA,SAAKgH,SAAL,GAAiBhK,CAAC,CAAC,OAAD,CAAD,CAAWqK,QAAX,CAAoBpH,qBAApB,CAAjB;;AACA,SAAKqH,sBAAL;;AACA,QAAIvF,QAAQ,GAAG,KAAKA,QAAL,EAAf;;AACA,SAAK+E,SAAL,CAAeO,QAAf,CAAwBtF,QAAQ,CAACwF,IAAT,CAAc,OAAd,CAAxB;;AACAxF,IAAAA,QAAQ,CAACsF,QAAT,CAAkBtH,aAAlB;;AACA,SAAK+G,SAAL,CAAeS,IAAf,CAAoB,WAApB,EAAiC,oCAAjC;;AACA/I,IAAAA,YAAY,CAACgJ,EAAb,CAAgB,KAAKV,SAArB,EAAgC,eAAhC,EAAiD1J,IAAjD;AACAoB,IAAAA,YAAY,CAACgJ,EAAb,CAAgB,KAAKV,SAArB,EAAgC,SAAhC,EAA2CxE,CAAC,IAAI;AAC5CA,MAAAA,CAAC,CAACS,eAAF;AACH,KAFD;;AAGA,SAAK0E,2BAAL,CAAiC,IAAjC;;AACA,SAAKC,0BAAL,CAAgC,KAAK7E,MAAL,CAAY,uBAAZ,CAAhC;AACH,GA3IwB;AA4IzB8E,EAAAA,YAAY,EAAE,UAASjB,OAAT,EAAkB;AAC5B,SAAKkB,WAAL,CAAiBlB,OAAO,CAACxE,MAAzB;;AACA,QAAI0D,SAAS,GAAG,KAAK,CAAL,KAAWc,OAAO,CAACd,SAAnB,GAA+B,KAAK/C,MAAL,CAAY,WAAZ,CAA/B,GAA0D6D,OAAO,CAACd,SAAlF;;AACA,SAAKiC,cAAL,CAAoBjC,SAApB;;AACA,SAAKxC,QAAL,CAAcsD,OAAd;AACH,GAjJwB;AAkJzBY,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKN,SAAL,CAAec,WAAf,CAA2B1H,mBAA3B,EAAgD,KAAKyC,MAAL,CAAY,cAAZ,CAAhD;AACH,GApJwB;AAqJzB+E,EAAAA,WAAW,EAAE,UAAS1F,MAAT,EAAiB;AAC1B,QAAI,CAACrE,SAAS,CAACqE,MAAD,CAAd,EAAwB;AACpB;AACH;;AACD,QAAIwE,OAAO,GAAG,KAAK7D,MAAL,EAAd;AACApF,IAAAA,IAAI,CAAC,CAAC,aAAD,EAAgB,iCAAhB,EAAmD,+BAAnD,EAAoF,iCAApF,EAAuH,+BAAvH,CAAD,EAA0J,CAACsK,CAAD,EAAIC,IAAJ,KAAa;AACvK,UAAIC,SAAS,GAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAhB;AACA,UAAIrF,MAAM,GAAG6D,OAAb;;AACA,aAAO7D,MAAP,EAAe;AACX,YAAI,MAAMoF,SAAS,CAACzF,MAApB,EAA4B;AACxB,cAAIzE,aAAa,CAAC8E,MAAD,CAAjB,EAA2B;AACvBA,YAAAA,MAAM,CAACoF,SAAS,CAACE,KAAV,EAAD,CAAN,GAA4BjG,MAA5B;AACH;;AACD;AACH,SALD,MAKO;AACHW,UAAAA,MAAM,GAAGA,MAAM,CAACoF,SAAS,CAACE,KAAV,EAAD,CAAf;AACH;AACJ;AACJ,KAbG,CAAJ;AAcH,GAxKwB;AAyKzBN,EAAAA,cAAc,EAAE,UAASjC,SAAT,EAAoB;AAChCA,IAAAA,SAAS,GAAG,KAAK,CAAL,KAAWA,SAAX,GAAuBvH,QAAQ,EAA/B,GAAoCuH,SAAhD;AACA,QAAI7D,QAAQ,GAAG,KAAKA,QAAL,EAAf;AACA,QAAIqG,UAAU,GAAGrG,QAAQ,CAACsG,OAAT,CAAiBzC,SAAjB,CAAjB;;AACA,QAAI,CAACwC,UAAU,CAAC5F,MAAhB,EAAwB;AACpB4F,MAAAA,UAAU,GAAGpL,CAAC,CAAC4I,SAAD,CAAD,CAAa0C,KAAb,EAAb;AACH;;AACD,SAAKC,WAAL,GAAmBH,UAAU,CAAC5F,MAAX,GAAoB4F,UAApB,GAAiCrG,QAAQ,CAACyG,MAAT,EAApD;AACH,GAjLwB;AAkLzBd,EAAAA,0BAA0B,EAAE,UAASe,OAAT,EAAkB;AAC1C,SAAKC,sBAAL,GAA8BD,OAA9B;AACH,GApLwB;AAqLzBvB,EAAAA,YAAY,EAAE,YAAW;AACrB,SAAKyB,QAAL,GAAgB,EAAhB;AACAlL,IAAAA,IAAI,CAAC+C,OAAD,EAAU,CAACuH,CAAD,EAAIa,MAAJ,KAAe;AACzB,WAAKD,QAAL,CAAcC,MAAd,IAAwB,KAAKC,qBAAL,CAA2BD,MAA3B,EAAmC;AACvDE,QAAAA,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb;AADoC,OAAnC,KAElB1L,IAFN;AAGH,KAJG,CAAJ;AAKH,GA5LwB;AA6LzB+J,EAAAA,+BAA+B,EAAE,YAAW;AACxC,QAAI4B,IAAI,GAAG,IAAX;;AACA,SAAKtG,2BAAL,GAAmC,YAAW;AAC1C,aAAOsG,IAAI,CAACC,oBAAL,CAA0B,GAAGC,SAA7B,CAAP;AACH,KAFD;AAGH,GAlMwB;AAmMzBD,EAAAA,oBAAoB,EAAE,UAAS1G,CAAT,EAAY;AAC9B,QAAI,KAAK4G,wBAAT,EAAmC;AAC/B,WAAKC,cAAL;AACH;;AACD,QAAInE,mBAAmB,GAAG,KAAKnC,MAAL,CAAY,qBAAZ,CAA1B;;AACA,QAAI/E,UAAU,CAACkH,mBAAD,CAAd,EAAqC;AACjCA,MAAAA,mBAAmB,GAAGA,mBAAmB,CAAC1C,CAAD,CAAzC;AACH;;AACD,QAAI8F,UAAU,GAAG,KAAKpB,SAAtB;AACA,QAAIoC,gBAAgB,GAAGpM,CAAC,CAAC6C,MAAM,CAACwJ,QAAR,CAAD,CAAmBC,EAAnB,CAAsBhH,CAAC,CAACJ,MAAxB,KAAmC5E,QAAQ,CAACuC,MAAM,CAACwJ,QAAR,EAAkB/G,CAAC,CAACJ,MAApB,CAAlE;AACA,QAAIqH,cAAc,GAAGvM,CAAC,CAACsF,CAAC,CAACJ,MAAH,CAAD,CAAYmG,OAAZ,CAAoB,MAAMjI,mBAA1B,EAA+CoC,MAApE;AACA,QAAIgH,YAAY,GAAGJ,gBAAgB,IAAI,CAACG,cAArB,IAAuC,EAAEnB,UAAU,CAACkB,EAAX,CAAchH,CAAC,CAACJ,MAAhB,KAA2B5E,QAAQ,CAAC8K,UAAU,CAACqB,GAAX,CAAe,CAAf,CAAD,EAAoBnH,CAAC,CAACJ,MAAtB,CAArC,CAA1D;;AACA,QAAIsH,YAAY,IAAIxE,mBAApB,EAAyC;AACrC,WAAK0E,oBAAL,CAA0BpH,CAA1B;AACH;;AACD,WAAO,KAAKO,MAAL,CAAY,uBAAZ,CAAP;AACH,GAnNwB;;AAoNzB6G,EAAAA,oBAAoB,CAACpH,CAAD,EAAI;AACpB,QAAI,KAAKO,MAAL,CAAY,SAAZ,CAAJ,EAA4B;AACxBP,MAAAA,CAAC,CAACQ,cAAF;AACH;;AACD,SAAKQ,IAAL;AACH,GAzNwB;;AA0NzBqG,EAAAA,yBAAyB,EAAE,YAAW;AAClC,WAAOrJ,uBAAP;AACH,GA5NwB;AA6NzBsJ,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKC,gBAAL,CAAsBC,mBAAtB,CAA0C;AACtCC,MAAAA,OAAO,EAAE,IAAI9M,aAAJ;AAD6B,KAA1C;;AAGA,SAAKmG,QAAL;AACH,GAlOwB;AAmOzB4G,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAIC,YAAY,GAAG,KAAKC,aAAL,EAAnB;;AACA,SAAK,IAAI3H,CAAC,GAAG0H,YAAY,CAACzH,MAAb,GAAsB,CAAnC,EAAsCD,CAAC,IAAI,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;AAC/C,UAAI4H,gBAAgB,GAAGF,YAAY,CAAC1H,CAAD,CAAZ,CAAgB6H,mBAAhB,EAAvB;;AACA,UAAID,gBAAgB,CAAC7B,KAAjB,IAA0B6B,gBAAgB,CAACE,IAA/C,EAAqD;AACjD,eAAOJ,YAAY,CAAC1H,CAAD,CAAZ,KAAoB,IAA3B;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GA5OwB;AA6OzB2H,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAOzJ,aAAP;AACH,GA/OwB;AAgPzB6J,EAAAA,gBAAgB,EAAE,YAAW;AACzB,WAAO5H,OAAO,CAAC6H,UAAR,EAAP;AACH,GAlPwB;AAmPzB9C,EAAAA,2BAA2B,EAAE,UAAS+C,MAAT,EAAiB;AAC1C1K,IAAAA,eAAe,CAAC2K,MAAhB,CAAuB,KAAKC,qBAA5B;;AACA,QAAIF,MAAJ,EAAY;AACR,WAAKE,qBAAL,GAA6B,KAAKC,sBAAL,CAA4BnH,IAA5B,CAAiC,IAAjC,CAA7B;AACA1D,MAAAA,eAAe,CAACF,GAAhB,CAAoB,KAAK8K,qBAAzB;AACH;AACJ,GAzPwB;AA0PzBC,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAK9C,cAAL,CAAoB,KAAKhF,MAAL,CAAY,WAAZ,CAApB;;AACA,SAAK+H,QAAL;AACH,GA7PwB;AA8PzBC,EAAAA,wBAAwB,EAAE,UAAS/G,OAAT,EAAkB;AACxC,SAAKqF,cAAL;;AACA,WAAOrF,OAAO,GAAG,KAAKgH,KAAL,EAAH,GAAkB,KAAKC,KAAL,EAAhC;AACH,GAjQwB;AAkQzBC,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,QAAI9G,QAAQ,GAAG,KAAKrB,MAAL,CAAY,UAAZ,CAAf;AACA,SAAKoI,SAAL,GAAiB,eAAe,OAAO/G,QAAtB,GAAiCA,QAAQ,EAAzC,GAA8CA,QAA/D;AACH,GArQwB;AAsQzBgH,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,QAAI1G,SAAS,GAAG,KAAK3B,MAAL,CAAY,WAAZ,CAAhB;;AACA,QAAI/E,UAAU,CAAC0G,SAAD,CAAd,EAA2B;AACvBA,MAAAA,SAAS,GAAGA,SAAS,CAAC2G,IAAV,CAAe,IAAf,CAAZ;AACH;;AACD,WAAO3G,SAAP;AACH,GA5QwB;AA6QzBsG,EAAAA,KAAK,EAAE,YAAW;AACd,QAAI/B,IAAI,GAAG,IAAX;AACA,QAAIqC,QAAQ,GAAG,IAAI/N,QAAJ,EAAf;AACA,SAAKgO,aAAL,GAAqB,KAAKC,eAAL,EAArB;AACAF,IAAAA,QAAQ,CAACG,IAAT,CAAc,MAAM;AAChB,aAAOxC,IAAI,CAACsC,aAAZ;AACH,KAFD;;AAGA,QAAI,KAAKA,aAAT,EAAwB;AACpB,WAAKG,SAAL,GAAiB,IAAjB;AACA,aAAOJ,QAAQ,CAACK,OAAT,EAAP;AACH;;AACD,QAAI,KAAKC,eAAT,EAA0B;AACtB,aAAQ,IAAIrO,QAAJ,EAAD,CAAeoO,OAAf,GAAyBE,OAAzB,EAAP;AACH;;AACD,SAAKD,eAAL,GAAuB,IAAvB;AACA,SAAKE,QAAL,GAAgB,KAAhB;;AACA,SAAKZ,kBAAL;;AACA,QAAIxG,SAAS,GAAGuE,IAAI,CAACmC,mBAAL,MAA8B,EAA9C;;AACA,QAAIW,aAAa,GAAG,KAAKC,mBAAL,CAAyBtH,SAAS,CAACC,IAAnC,EAAyC,IAAzC,CAApB;;AACA,QAAIsH,kBAAkB,GAAGF,aAAa,IAAIA,aAAa,CAACpN,KAA/B,IAAwCrB,IAAjE;AACA,QAAI4O,qBAAqB,GAAGH,aAAa,IAAIA,aAAa,CAACI,QAA/B,IAA2C7O,IAAvE;;AACA,QAAI,KAAK8O,uBAAT,EAAkC;AAC9B,aAAO,KAAKA,uBAAZ;AACAd,MAAAA,QAAQ,CAACK,OAAT;AACH,KAHD,MAGO;AACH,UAAIhH,IAAI,GAAG,MAAM;AACb,aAAK0H,iBAAL,CAAuB,IAAvB;;AACA,YAAI,KAAKC,wBAAT,EAAmC;AAC/B,iBAAO,KAAKA,wBAAZ;AACAhB,UAAAA,QAAQ,CAACK,OAAT;AACA;AACH;;AACD,aAAKY,QAAL,CAAcR,aAAd,EAA8B,YAAW;AACrC,cAAI9C,IAAI,CAAClG,MAAL,CAAY,mBAAZ,CAAJ,EAAsC;AAClCrE,YAAAA,YAAY,CAAC8N,OAAb,CAAqBvD,IAAI,CAACwD,YAAL,EAArB,EAA0C,OAA1C;AACH;;AACDP,UAAAA,qBAAqB,CAACQ,KAAtB,CAA4B,IAA5B,EAAkCvD,SAAlC;AACAF,UAAAA,IAAI,CAACG,wBAAL,GAAgC,KAAhC;AACAH,UAAAA,IAAI,CAAC6C,QAAL,GAAgB,IAAhB;;AACA7C,UAAAA,IAAI,CAACJ,QAAL,CAAczD,OAAd;;AACA6D,UAAAA,IAAI,CAAC0D,sBAAL,CAA4B,KAA5B;;AACArB,UAAAA,QAAQ,CAACK,OAAT;AACH,SAVD,EAUK,YAAW;AACZM,UAAAA,kBAAkB,CAACS,KAAnB,CAAyB,IAAzB,EAA+BvD,SAA/B;AACAF,UAAAA,IAAI,CAACG,wBAAL,GAAgC,IAAhC;AACH,SAbD;AAcH,OArBD;;AAsBA,UAAI,KAAKrG,MAAL,CAAY,+BAAZ,CAAJ,EAAkD;AAC9C,aAAK6J,cAAL;;AACA,aAAKC,iBAAL,GAAyBC,UAAU,CAACnI,IAAD,CAAnC;AACH,OAHD,MAGO;AACHA,QAAAA,IAAI;AACP;AACJ;;AACD,WAAO2G,QAAQ,CAACO,OAAT,EAAP;AACH,GApUwB;AAqUzBG,EAAAA,mBAAmB,EAAE,UAAStH,SAAT,EAAoBqI,IAApB,EAA0B;AAC3C,QAAIrI,SAAJ,EAAe;AACXA,MAAAA,SAAS,GAAGhH,MAAM,CAAC;AACfkH,QAAAA,IAAI,EAAE;AADS,OAAD,EAEfF,SAFe,CAAlB;;AAGA,UAAIA,SAAS,CAACqI,IAAD,CAAT,IAAmB,aAAa,OAAOrI,SAAS,CAACqI,IAAD,CAApD,EAA4D;AACxDrP,QAAAA,MAAM,CAACgH,SAAS,CAACqI,IAAD,CAAV,EAAkB;AACpB3I,UAAAA,QAAQ,EAAE,KAAK+G;AADK,SAAlB,CAAN;AAGH;AACJ;;AACD,WAAOzG,SAAP;AACH,GAjVwB;AAkVzBuG,EAAAA,KAAK,EAAE,YAAW;AACd,QAAI,CAAC,KAAKW,eAAV,EAA2B;AACvB,aAAQ,IAAIrO,QAAJ,EAAD,CAAeoO,OAAf,GAAyBE,OAAzB,EAAP;AACH;;AACD,SAAKD,eAAL,GAAuB,KAAvB;AACA,QAAI3C,IAAI,GAAG,IAAX;AACA,QAAIqC,QAAQ,GAAG,IAAI/N,QAAJ,EAAf;AACA,QAAImH,SAAS,GAAGuE,IAAI,CAACmC,mBAAL,MAA8B,EAA9C;;AACA,QAAI4B,aAAa,GAAG,KAAKhB,mBAAL,CAAyBtH,SAAS,CAAClB,IAAnC,EAAyC,MAAzC,CAApB;;AACA,QAAIyJ,kBAAkB,GAAGD,aAAa,IAAIA,aAAa,CAACrO,KAA/B,IAAwCrB,IAAjE;AACA,QAAI4P,qBAAqB,GAAGF,aAAa,IAAIA,aAAa,CAACb,QAA/B,IAA2C7O,IAAvE;AACA,QAAI6P,UAAU,GAAG;AACbC,MAAAA,MAAM,EAAE;AADK,KAAjB;;AAGA,QAAI,KAAKd,wBAAT,EAAmC;AAC/BhB,MAAAA,QAAQ,CAACK,OAAT;AACH,KAFD,MAEO;AACH,WAAK9C,QAAL,CAAcxD,QAAd,CAAuB8H,UAAvB;;AACAlE,MAAAA,IAAI,CAAC0D,sBAAL,CAA4B,IAA5B;;AACA,UAAIQ,UAAU,CAACC,MAAf,EAAuB;AACnB,aAAKhB,uBAAL,GAA+B,IAA/B;AACA,aAAKrJ,MAAL,CAAY,SAAZ,EAAuB,IAAvB;AACAuI,QAAAA,QAAQ,CAACK,OAAT;AACH,OAJD,MAIO;AACH,aAAK0B,eAAL;;AACA,aAAKC,cAAL,CAAoB,KAApB;;AACA,aAAKC,oBAAL,CAA0B,KAA1B;;AACA,aAAKX,cAAL;;AACA,aAAKL,QAAL,CAAcS,aAAd,EAA8B,YAAW;AACrC,cAAIQ,cAAJ;;AACAvE,UAAAA,IAAI,CAAC/B,SAAL,CAAeuG,GAAf,CAAmB,eAAnB,EAAoC,EAApC;;AACAxE,UAAAA,IAAI,CAACoD,iBAAL,CAAuB,KAAvB;;AACAa,UAAAA,qBAAqB,CAACR,KAAtB,CAA4B,IAA5B,EAAkCvD,SAAlC;AACAF,UAAAA,IAAI,CAACyE,wBAAL,GAAgC,KAAhC;AACA,oBAAUF,cAAc,GAAGvE,IAAI,CAACJ,QAAhC,KAA6C,KAAK,CAAL,KAAW2E,cAAxD,GAAyE,KAAK,CAA9E,GAAkFA,cAAc,CAAClI,QAAf,EAAlF;AACAgG,UAAAA,QAAQ,CAACK,OAAT;AACH,SARD,EAQK,YAAW;AACZ1C,UAAAA,IAAI,CAAC/B,SAAL,CAAeuG,GAAf,CAAmB,eAAnB,EAAoC,MAApC;;AACAR,UAAAA,kBAAkB,CAACP,KAAnB,CAAyB,IAAzB,EAA+BvD,SAA/B;AACAF,UAAAA,IAAI,CAACyE,wBAAL,GAAgC,IAAhC;AACH,SAZD;AAaH;AACJ;;AACD,WAAOpC,QAAQ,CAACO,OAAT,EAAP;AACH,GA9XwB;AA+XzBwB,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAIM,aAAa,GAAG3Q,UAAU,CAAC4Q,gBAAX,EAApB;AACA,QAAIC,wBAAwB,GAAG,CAAC,CAAC,KAAK3G,SAAL,CAAe4G,IAAf,CAAoBH,aAApB,EAAmCjL,MAApE;;AACA,QAAImL,wBAAJ,EAA8B;AAC1BpQ,MAAAA,kBAAkB;AACrB;AACJ,GArYwB;AAsYzB8O,EAAAA,QAAQ,EAAE,UAAS7H,SAAT,EAAoBqJ,gBAApB,EAAsCC,aAAtC,EAAqD;AAC3D,QAAItJ,SAAJ,EAAe;AACXsJ,MAAAA,aAAa,GAAGA,aAAa,IAAItJ,SAAS,CAAC/F,KAA3B,IAAoCrB,IAApD;AACAb,MAAAA,EAAE,CAACwR,OAAH,CAAW,KAAK/G,SAAhB,EAA2BxJ,MAAM,CAAC,EAAD,EAAKgH,SAAL,EAAgB;AAC7C/F,QAAAA,KAAK,EAAEqP,aADsC;AAE7C7B,QAAAA,QAAQ,EAAE4B;AAFmC,OAAhB,CAAjC;AAIH,KAND,MAMO;AACHA,MAAAA,gBAAgB;AACnB;AACJ,GAhZwB;AAiZzB1E,EAAAA,cAAc,EAAE,YAAW;AACvB5M,IAAAA,EAAE,CAACyR,IAAH,CAAQ,KAAKhH,SAAb,EAAwB,IAAxB;AACH,GAnZwB;AAoZzBmF,EAAAA,iBAAiB,EAAE,UAASrI,OAAT,EAAkB;AACjC,QAAIA,OAAO,IAAI,KAAKwH,eAAL,EAAf,EAAuC;AACnC;AACH;;AACD,SAAKI,eAAL,GAAuB5H,OAAvB;;AACA,SAAKqF,cAAL;;AACA,QAAI,CAACrF,OAAL,EAAc;AACV7E,MAAAA,kBAAkB,CAAC,KAAK+H,SAAN,CAAlB;AACH;;AACD,SAAKiH,iBAAL,CAAuBnK,OAAvB;;AACA,SAAKkD,SAAL,CAAec,WAAf,CAA2BzH,qBAA3B,EAAkD,CAACyD,OAAnD;;AACA,SAAKoK,0BAAL,CAAgCpK,OAAhC;;AACA,QAAIA,OAAJ,EAAa;AACT,WAAKqK,cAAL;;AACA,UAAIC,WAAW,GAAG;AACdlB,QAAAA,MAAM,EAAE;AADM,OAAlB;;AAGA,WAAKvE,QAAL,CAAc1D,SAAd,CAAwBmJ,WAAxB;;AACA,UAAIA,WAAW,CAAClB,MAAhB,EAAwB;AACpB,aAAKe,iBAAL,CAAuB,KAAvB;;AACA,aAAKjH,SAAL,CAAec,WAAf,CAA2BzH,qBAA3B,EAAkD,IAAlD;;AACA,aAAK6N,0BAAL,CAAgC,KAAhC;;AACA,aAAKG,kBAAL;;AACA,aAAKjC,wBAAL,GAAgC,IAAhC;AACA,aAAKvJ,MAAL,CAAY,SAAZ,EAAuB,KAAvB;AACA;AACH;;AACD,WAAKyL,gBAAL;;AACA,WAAKC,eAAL;;AACApP,MAAAA,iBAAiB,CAAC,KAAK6H,SAAN,CAAjB;AACA9H,MAAAA,kBAAkB,CAAC,KAAK8H,SAAN,CAAlB;AACH,KAnBD,MAmBO;AACH,WAAKqH,kBAAL;AACH;;AACD,SAAKjB,cAAL,CAAoBtJ,OAApB;;AACA,SAAKuJ,oBAAL,CAA0BvJ,OAA1B;AACH,GAxbwB;AAybzBoK,EAAAA,0BAA0B,EAAE,UAASM,WAAT,EAAsB;AAC9C,QAAIvE,YAAY,GAAG,KAAKC,aAAL,EAAnB;;AACA,QAAIuE,KAAK,GAAGvR,OAAO,CAAC,IAAD,EAAO+M,YAAP,CAAnB;;AACA,QAAIuE,WAAJ,EAAiB;AACb,UAAI,CAAC,CAAD,KAAOC,KAAX,EAAkB;AACd,aAAKC,OAAL,GAAehP,UAAU,CAACiP,MAAX,CAAkB,KAAKrE,gBAAL,EAAlB,CAAf;AACAL,QAAAA,YAAY,CAAC2E,IAAb,CAAkB,IAAlB;AACH;;AACD,WAAK9H,SAAL,CAAeyG,GAAf,CAAmB,QAAnB,EAA6B,KAAKmB,OAAlC;;AACA,WAAK1H,SAAL,CAAeuG,GAAf,CAAmB,QAAnB,EAA6B,KAAKmB,OAAlC;AACH,KAPD,MAOO,IAAI,CAAC,CAAD,KAAOD,KAAX,EAAkB;AACrBxE,MAAAA,YAAY,CAAC4E,MAAb,CAAoBJ,KAApB,EAA2B,CAA3B;AACA/O,MAAAA,UAAU,CAAC+K,MAAX,CAAkB,KAAKiE,OAAvB;AACH;AACJ,GAvcwB;AAwczBtB,EAAAA,cAAc,EAAE,UAAStJ,OAAT,EAAkB;AAC9B,SAAKgD,SAAL,CAAegB,WAAf,CAA2B3H,mBAA3B,EAAgD,KAAK0C,MAAL,CAAY,SAAZ,KAA0B,CAAC,KAAKA,MAAL,CAAY,WAAZ,CAA3E;;AACA,SAAKiE,SAAL,CAAegB,WAAf,CAA2B5H,oBAA3B,EAAiD4D,OAAO,IAAI,KAAKjB,MAAL,CAAY,SAAZ,CAA5D;;AACA,SAAKiE,SAAL,CAAeyG,GAAf,CAAmB,iBAAnB,EAAsC,KAAK1K,MAAL,CAAY,SAAZ,IAAyB,KAAKA,MAAL,CAAY,cAAZ,CAAzB,GAAuD,EAA7F;;AACA,SAAKiM,oBAAL,CAA0BhL,OAAO,IAAI,KAAKjB,MAAL,CAAY,SAAZ,CAArC;AACH,GA7cwB;AA8czBuE,EAAAA,yBAAyB,EAAE,YAAW;AAClC,QAAI2B,IAAI,GAAG,IAAX;;AACA,SAAKgG,4BAAL,GAAoC,YAAW;AAC3ChG,MAAAA,IAAI,CAACiG,cAAL,CAAoB,GAAG/F,SAAvB;AACH,KAFD;AAGH,GAndwB;AAodzB6F,EAAAA,oBAAoB,EAAE,UAASG,OAAT,EAAkB;AACpC,QAAIC,SAAS,GAAGpQ,YAAY,CAAC,SAAD,EAAY,KAAKqQ,IAAjB,CAA5B;;AACA,QAAIF,OAAJ,EAAa;AACTzQ,MAAAA,YAAY,CAACgJ,EAAb,CAAgB1K,UAAU,CAACsF,WAAX,EAAhB,EAA0C8M,SAA1C,EAAqD,KAAKH,4BAA1D;AACH,KAFD,MAEO;AACHvQ,MAAAA,YAAY,CAAC4Q,GAAb,CAAiBtS,UAAU,CAACsF,WAAX,EAAjB,EAA2C8M,SAA3C,EAAsD,KAAKH,4BAA3D;AACH;AACJ,GA3dwB;AA4dzB3E,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,QAAIiF,SAAS,GAAG,KAAKvI,SAAL,CAAe8G,IAAf,CAAoB,GAApB,CAAhB;;AACA,QAAI0B,aAAa,GAAGD,SAAS,CAAC7M,MAAV,GAAmB,CAAvC;AACA,QAAI+M,MAAM,GAAG;AACTjH,MAAAA,KAAK,EAAE,IADE;AAET+B,MAAAA,IAAI,EAAE;AAFG,KAAb;;AAIA,SAAK,IAAI9H,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI+M,aAArB,EAAoC/M,CAAC,EAArC,EAAyC;AACrC,UAAI,CAACgN,MAAM,CAACjH,KAAR,IAAiB+G,SAAS,CAACG,EAAV,CAAajN,CAAb,EAAgB+G,EAAhB,CAAmB/J,QAAnB,CAArB,EAAmD;AAC/CgQ,QAAAA,MAAM,CAACjH,KAAP,GAAe+G,SAAS,CAACG,EAAV,CAAajN,CAAb,CAAf;AACH;;AACD,UAAI,CAACgN,MAAM,CAAClF,IAAR,IAAgBgF,SAAS,CAACG,EAAV,CAAaF,aAAa,GAAG/M,CAA7B,EAAgC+G,EAAhC,CAAmC/J,QAAnC,CAApB,EAAkE;AAC9DgQ,QAAAA,MAAM,CAAClF,IAAP,GAAcgF,SAAS,CAACG,EAAV,CAAaF,aAAa,GAAG/M,CAA7B,CAAd;AACH;;AACD,UAAIgN,MAAM,CAACjH,KAAP,IAAgBiH,MAAM,CAAClF,IAA3B,EAAiC;AAC7B;AACH;AACJ;;AACD,WAAOkF,MAAP;AACH,GA/ewB;AAgfzBP,EAAAA,cAAc,EAAE,UAAS1M,CAAT,EAAY;AACxB,QAAItD,gBAAgB,CAACsD,CAAD,CAAhB,KAAwB1B,OAAxB,IAAmC,CAAC,KAAKoJ,aAAL,EAAxC,EAA8D;AAC1D;AACH;;AACD,QAAIG,gBAAgB,GAAG,KAAKC,mBAAL,EAAvB;;AACA,QAAIqF,cAAc,GAAGtF,gBAAgB,CAAC7B,KAAtC;AACA,QAAIoH,aAAa,GAAGvF,gBAAgB,CAACE,IAArC;AACA,QAAIsF,WAAW,GAAG,CAACrN,CAAC,CAACsN,QAAH,IAAetN,CAAC,CAACJ,MAAF,KAAawN,aAAa,CAACjG,GAAd,CAAkB,CAAlB,CAA9C;AACA,QAAIoG,iBAAiB,GAAGvN,CAAC,CAACsN,QAAF,IAActN,CAAC,CAACJ,MAAF,KAAauN,cAAc,CAAChG,GAAf,CAAmB,CAAnB,CAAnD;AACA,QAAIqG,cAAc,GAAG,MAAM3F,gBAAgB,CAAC3H,MAA5C;AACA,QAAIuN,eAAe,GAAG,CAACzS,QAAQ,CAAC,KAAKwJ,SAAL,CAAe2C,GAAf,CAAmB,CAAnB,CAAD,EAAwBnH,CAAC,CAACJ,MAA1B,CAA/B;;AACA,QAAIyN,WAAW,IAAIE,iBAAf,IAAoCC,cAApC,IAAsDC,eAA1D,EAA2E;AACvEzN,MAAAA,CAAC,CAACQ,cAAF;AACA,UAAIkN,aAAa,GAAG1N,CAAC,CAACsN,QAAF,GAAaF,aAAb,GAA6BD,cAAjD;AACAjR,MAAAA,YAAY,CAAC8N,OAAb,CAAqB0D,aAArB,EAAoC,SAApC;AACAxR,MAAAA,YAAY,CAAC8N,OAAb,CAAqB0D,aAArB,EAAoC,OAApC;AACH;AACJ,GAjgBwB;AAkgBzB3C,EAAAA,oBAAoB,EAAE,UAAS4B,OAAT,EAAkB;AACpC,QAAI1Q,SAAS,EAAb,EAAiB;AACb,WAAK0R,6BAAL,CAAmChB,OAAnC;;AACA,WAAKiB,gCAAL,CAAsCjB,OAAtC;AACH;AACJ,GAvgBwB;AAwgBzBgB,EAAAA,6BAA6B,EAAE,UAASE,SAAT,EAAoB;AAC/C,QAAI,CAAC,KAAKzH,sBAAV,EAAkC;AAC9B;AACH;;AACD,QAAIyH,SAAJ,EAAe;AACX9Q,MAAAA,sBAAsB,CAACO,GAAvB,CAA2B,KAAK8I,sBAAhC;AACH,KAFD,MAEO;AACHrJ,MAAAA,sBAAsB,CAACoL,MAAvB,CAA8B,KAAK/B,sBAAnC;AACH;AACJ,GAjhBwB;AAkhBzBwH,EAAAA,gCAAgC,EAAE,UAASC,SAAT,EAAoB;AAClD,QAAI,CAAC,KAAKlF,SAAV,EAAqB;AACjB;AACH;;AACD,QAAI/I,MAAM,GAAG,KAAK+I,SAAL,CAAemF,EAAf,IAAqBpT,CAAC,EAAnC;AACA,QAAIqT,aAAa,GAAG,KAAKxN,MAAL,CAAY,qBAAZ,CAApB;AACA,QAAIyN,QAAQ,GAAGrO,UAAU,CAACC,MAAD,CAAV,CAAmBqO,OAAnB,EAAf;AACA,QAAIC,WAAW,GAAG1R,YAAY,CAAC,QAAD,EAAW,KAAKqQ,IAAhB,CAA9B;;AACA,QAAI,cAActS,OAAO,CAACyE,IAAR,GAAeG,UAAjC,EAA6C;AACzC6O,MAAAA,QAAQ,GAAGA,QAAQ,CAAC1Q,GAAT,CAAaC,MAAb,CAAX;AACH;;AACD,SAAK4Q,kCAAL,GAA0C,KAAKA,kCAAL,KAA4CnO,CAAC,IAAI;AACvF,WAAKoO,2BAAL,CAAiCpO,CAAjC;AACH,KAFyC,CAA1C;;AAGA9D,IAAAA,YAAY,CAAC4Q,GAAb,CAAiBpS,CAAC,GAAG4C,GAAJ,CAAQ,KAAK+Q,mBAAb,CAAjB,EAAoDH,WAApD,EAAiE,KAAKC,kCAAtE;;AACA,QAAIN,SAAS,IAAIE,aAAjB,EAAgC;AAC5B7R,MAAAA,YAAY,CAACgJ,EAAb,CAAgB8I,QAAhB,EAA0BE,WAA1B,EAAuC,KAAKC,kCAA5C;AACA,WAAKE,mBAAL,GAA2BL,QAA3B;AACH;AACJ,GAriBwB;AAsiBzBI,EAAAA,2BAA2B,EAAE,UAASpO,CAAT,EAAY;AACrC,QAAIsO,YAAY,GAAG,KAAnB;AACA,QAAIP,aAAa,GAAG,KAAKxN,MAAL,CAAY,qBAAZ,CAApB;;AACA,QAAI/E,UAAU,CAACuS,aAAD,CAAd,EAA+B;AAC3BO,MAAAA,YAAY,GAAGP,aAAa,CAAC/N,CAAD,CAA5B;AACH;;AACD,QAAI,CAACsO,YAAD,IAAiB,CAAC,KAAK1H,wBAA3B,EAAqD;AACjD,WAAK5F,IAAL;AACH;AACJ,GA/iBwB;AAgjBzBuN,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKzN,QAAL;;AACA,SAAK0N,uBAAL;;AACA,SAAKjG,wBAAL,CAA8B,KAAKhI,MAAL,CAAY,SAAZ,CAA9B;AACH,GApjBwB;AAqjBzBiO,EAAAA,uBAAuB,EAAE,YAAW;AAChC,QAAI,CAAC,KAAK9J,SAAL,CAAewB,MAAf,GAAwBc,EAAxB,CAA2B,KAAKvH,QAAL,EAA3B,CAAL,EAAkD;AAC9C,WAAKiF,SAAL,CAAe+J,QAAf,CAAwB,KAAKhP,QAAL,EAAxB;AACH;AACJ,GAzjBwB;AA0jBzBoM,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAI6C,oBAAoB,GAAG,CAAC,KAAKtF,eAAN,IAAyB,KAAK7I,MAAL,CAAY,gBAAZ,CAApD;;AACA,QAAIoO,cAAc,GAAG,KAAKpO,MAAL,CAAY,SAAZ,KAA0B,KAAKyI,eAAL,EAA/C;;AACA,QAAI2F,cAAJ,EAAoB;AAChB,WAAKzF,SAAL,GAAiB,IAAjB;AACA;AACH;;AACD,QAAI,KAAK0F,uBAAL,IAAgCF,oBAApC,EAA0D;AACtD;AACH;;AACD,SAAKE,uBAAL,GAA+B,IAA/B;;AACA,SAAKJ,uBAAL;;AACA,SAAK1N,QAAL;AACH,GAvkBwB;AAwkBzBkI,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI,CAAC,KAAKzI,MAAL,CAAY,wBAAZ,CAAL,EAA4C;AACxC,aAAO,KAAP;AACH;;AACD,QAAI,KAAK,CAAL,KAAW,KAAKwI,aAApB,EAAmC;AAC/B,aAAO,KAAKA,aAAZ;AACH;;AACD,QAAI8F,OAAO,GAAG,KAAKpP,QAAL,GAAgByG,MAAhB,EAAd;;AACA,QAAI2I,OAAO,CAAC7H,EAAR,CAAW,UAAX,CAAJ,EAA4B;AACxB,aAAO,KAAP;AACH;;AACD,QAAI8H,QAAQ,GAAG,KAAf;AACAD,IAAAA,OAAO,CAACvR,GAAR,CAAYuR,OAAO,CAACZ,OAAR,EAAZ,EAA+B9S,IAA/B,CAAqC,YAAW;AAC5C,UAAIsE,QAAQ,GAAG/E,CAAC,CAAC,IAAD,CAAhB;;AACA,UAAI,WAAW+E,QAAQ,CAACwL,GAAT,CAAa,SAAb,CAAf,EAAwC;AACpC6D,QAAAA,QAAQ,GAAG,IAAX;AACA,eAAO,KAAP;AACH;AACJ,KAND;AAOA,WAAOA,QAAQ,IAAI,CAACtU,UAAU,CAACuU,OAAX,GAAqB/T,QAArB,CAA8B6T,OAAO,CAAC1H,GAAR,CAAY,CAAZ,CAA9B,CAApB;AACH,GA5lBwB;AA6lBzB6H,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,QAAIC,mBAAmB,GAAG,IAAIlU,QAAJ,EAA1B;AACA,QAAImU,qBAAqB,GAAG,KAAK3O,MAAL,CAAY,iBAAZ,CAA5B;;AACA,QAAIwC,eAAe,GAAG,KAAKoM,YAAL,CAAkBD,qBAAlB,CAAtB;;AACA,QAAIE,UAAU,GAAG,KAAK7H,gBAAL,CAAsB8H,qBAAtB,KAAgDH,qBAAjE;AACAnM,IAAAA,eAAe,IAAIA,eAAe,CAACuM,MAAhB,CAAuB;AACtChM,MAAAA,SAAS,EAAE7I,gBAAgB,CAAC,KAAK8U,QAAL,EAAD,CADW;AAEtCC,MAAAA,OAAO,EAAE,IAF6B;AAGtCJ,MAAAA,UAAU,EAAEA,UAH0B;AAItCK,MAAAA,UAAU,EAAE,MAAM;AACdR,QAAAA,mBAAmB,CAAC9F,OAApB;AACH;AANqC,KAAvB,CAAnB;;AAQA,SAAKuG,WAAL;;AACA,SAAKC,aAAL;;AACA,SAAKC,uBAAL;;AACAX,IAAAA,mBAAmB,CAAChG,IAApB,CAAyB,MAAM;AAC3B,UAAI,KAAK1I,MAAL,CAAY,SAAZ,CAAJ,EAA4B;AACxB,aAAKyL,gBAAL;AACH;AACJ,KAJD;AAKA,WAAOiD,mBAAmB,CAAC5F,OAApB,EAAP;AACH,GAnnBwB;AAonBzBqG,EAAAA,WAAW,EAAE,YAAW;AACpB,QAAIG,WAAW,GAAG,KAAKC,cAAL,EAAlB;;AACA,QAAI,CAACD,WAAL,EAAkB;AACd;AACH;;AACD,QAAIE,cAAc,GAAGvT,YAAY,CAACJ,cAAD,EAAiB,KAAKyQ,IAAtB,CAAjC;AACA,QAAImD,eAAe,GAAGxT,YAAY,CAACH,aAAD,EAAgB,KAAKwQ,IAArB,CAAlC;AACA3Q,IAAAA,YAAY,CAAC4Q,GAAb,CAAiB+C,WAAjB,EAA8BE,cAA9B;AACA7T,IAAAA,YAAY,CAAC4Q,GAAb,CAAiB+C,WAAjB,EAA8BG,eAA9B;;AACA,QAAI,CAAC,KAAKzP,MAAL,CAAY,aAAZ,CAAL,EAAiC;AAC7B;AACH;;AACDrE,IAAAA,YAAY,CAACgJ,EAAb,CAAgB2K,WAAhB,EAA6BE,cAA7B,EAA6C,KAAKE,iBAAL,CAAuB/O,IAAvB,CAA4B,IAA5B,CAA7C;AACAhF,IAAAA,YAAY,CAACgJ,EAAb,CAAgB2K,WAAhB,EAA6BG,eAA7B,EAA8C,KAAKE,kBAAL,CAAwBhP,IAAxB,CAA6B,IAA7B,CAA9C;AACH,GAloBwB;AAmoBzByO,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAKQ,UAAL,GAAkB,KAAKC,gBAAL,CAAsB,KAAK1L,SAA3B,EAAsC1H,SAAtC,EAAiD;AAC/DqT,MAAAA,OAAO,EAAE,KAAK9P,MAAL,CAAY,eAAZ,IAA+B,KAA/B,GAAuC,MADe;AAE/D6C,MAAAA,WAAW,EAAE,KAAKkN,iBAAL,CAAuBpP,IAAvB,CAA4B,IAA5B,CAFkD;AAG/DiC,MAAAA,QAAQ,EAAE,KAAKkD,QAAL,CAAclD,QAAd,CAAuBjC,IAAvB,CAA4B,IAA5B,CAHqD;AAI/DgC,MAAAA,aAAa,EAAE,KAAKmD,QAAL,CAAcnD,aAAd,CAA4BhC,IAA5B,CAAiC,IAAjC,CAJgD;AAK/Dc,MAAAA,SAAS,EAAE,GALoD;AAM/DH,MAAAA,QAAQ,EAAE,GANqD;AAO/D0O,MAAAA,IAAI,EAAE,KAAKC,uBAAL;AAPyD,KAAjD,CAAlB;AASH,GA7oBwB;AA8oBzBF,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,SAAKG,sBAAL,GAA8B,IAA9B;;AACA,QAAI/Q,KAAK,GAAG,KAAKyQ,UAAL,CAAgB5P,MAAhB,CAAuB,OAAvB,CAAZ;;AACA,QAAIwB,MAAM,GAAG,KAAKoO,UAAL,CAAgB5P,MAAhB,CAAuB,QAAvB,CAAb;;AACAb,IAAAA,KAAK,IAAI,KAAKa,MAAL,CAAY,OAAZ,EAAqBb,KAArB,CAAT;AACAqC,IAAAA,MAAM,IAAI,KAAKxB,MAAL,CAAY,QAAZ,EAAsBwB,MAAtB,CAAV;;AACA,SAAKsE,QAAL,CAAcjD,WAAd;AACH,GArpBwB;AAspBzBwM,EAAAA,uBAAuB,EAAE,YAAW;AAChC,QAAIc,iBAAiB,GAAG,KAAKlM,SAA7B;AACA,QAAImM,mBAAmB,GAAGnU,YAAY,CAACH,aAAD,EAAgB,KAAKwQ,IAArB,CAAtC;AACA3Q,IAAAA,YAAY,CAAC4Q,GAAb,CAAiB4D,iBAAjB,EAAoCC,mBAApC;AACAzU,IAAAA,YAAY,CAACgJ,EAAb,CAAgBwL,iBAAhB,EAAmCC,mBAAnC,EAAwD;AACpDC,MAAAA,QAAQ,EAAE,YAAW;AACjB,eAAO,IAAP;AACH,OAHmD;AAIpDC,MAAAA,YAAY,EAAE,YAAW;AACrB,eAAO,MAAP;AACH,OANmD;AAOpDC,MAAAA,mBAAmB,EAAE,UAAS5I,MAAT,EAAiB;AAClC,YAAI,CAACA,MAAL,EAAa;AACT,eAAK6I,uBAAL,CAA6B7I,MAA7B;AACH;AACJ,OAXmD;AAYpD8I,MAAAA,eAAe,EAAElW,IAZmC;AAapDmW,MAAAA,QAAQ,EAAE;AAb0C,KAAxD,EAcGjR,CAAC,IAAI;AACJ,UAAIkR,aAAa,GAAGlR,CAAC,CAACkR,aAAF,CAAgBA,aAApC;AACA,UAAI;AACA9O,QAAAA,IAAI,EAAEA;AADN,UAEA8O,aAAa,IAAI,EAFrB;AAGA,UAAIC,OAAO,GAAG,YAAY/O,IAA1B;AACA,UAAIgP,WAAW,GAAG,gBAAgBhP,IAAlC;AACA,UAAIiP,eAAe,GAAGF,OAAO,IAAI,CAAC1U,mBAAmB,CAACuD,CAAD,CAArD;AACAA,MAAAA,CAAC,CAACsR,qBAAF,GAA0B,IAA1B;;AACA,UAAIJ,aAAa,IAAI,UAAUlR,CAAC,CAACuR,UAA7B,KAA4C,CAACH,WAAD,IAAgB,CAACD,OAAjB,IAA4BE,eAAxE,CAAJ,EAA8F;AAC1FrR,QAAAA,CAAC,CAACQ,cAAF;AACH;AACJ,KA1BD;AA2BH,GArrBwB;AAsrBzBsP,EAAAA,cAAc,EAAE,YAAW;AACvB,WAAO,KAAKP,QAAL,EAAP;AACH,GAxrBwB;AAyrBzBU,EAAAA,iBAAiB,EAAE,UAASjQ,CAAT,EAAY;AAC3BA,IAAAA,CAAC,CAACwR,cAAF,GAAmB,EAAnB;AACA,SAAKC,WAAL,GAAmB;AACfC,MAAAA,CAAC,EAAE,CADY;AAEfC,MAAAA,CAAC,EAAE;AAFY,KAAnB;;AAIA,QAAIjR,cAAc,GAAG,KAAKC,eAAL,EAArB;;AACAX,IAAAA,CAAC,CAAC4R,YAAF,GAAiBlR,cAAc,CAAClC,GAAhC;AACAwB,IAAAA,CAAC,CAAC6R,eAAF,GAAoBnR,cAAc,CAAC/B,MAAnC;AACAqB,IAAAA,CAAC,CAAC8R,aAAF,GAAkBpR,cAAc,CAAC7B,IAAjC;AACAmB,IAAAA,CAAC,CAAC+R,cAAF,GAAmBrR,cAAc,CAAC9B,KAAlC;AACH,GApsBwB;AAqsBzB4R,EAAAA,uBAAuB,EAAE,YAAW;AAChC,QAAIwB,kBAAkB,GAAGnW,gBAAgB,GAAGsL,GAAnB,CAAuB,CAAvB,KAA6B,KAAK5G,MAAL,CAAY,WAAZ,CAAtD;AACA,QAAIuF,UAAU,GAAG,CAACkM,kBAAD,GAAsBtX,CAAC,CAAC6C,MAAD,CAAvB,GAAkC,KAAK0I,WAAxD;AACA,WAAOH,UAAP;AACH,GAzsBwB;AA0sBzBmM,EAAAA,UAAU,EAAE,YAAW;AACnB,QAAI1C,QAAQ,GAAG,KAAK7K,SAApB;;AACA,QAAIoB,UAAU,GAAG,KAAK0K,uBAAL,EAAjB;;AACA,QAAI0B,YAAY,GAAG3C,QAAQ,CAAC4C,UAAT,EAAnB;AACA,QAAIC,aAAa,GAAG7C,QAAQ,CAAC8C,WAAT,EAApB;AACA,QAAIC,cAAc,GAAGxM,UAAU,CAACqM,UAAX,EAArB;AACA,QAAII,eAAe,GAAGzM,UAAU,CAACuM,WAAX,EAAtB;;AACA,QAAI,KAAKG,SAAL,CAAe1M,UAAf,CAAJ,EAAgC;AAC5B,UAAIiB,QAAQ,GAAGvM,UAAU,CAACsF,WAAX,EAAf;AACA,UAAI2S,cAAc,GAAGC,IAAI,CAACC,GAAL,CAASjY,CAAC,CAACqM,QAAD,CAAD,CAAYsL,WAAZ,EAAT,EAAoCE,eAApC,CAArB;AACA,UAAIK,aAAa,GAAGF,IAAI,CAACC,GAAL,CAASjY,CAAC,CAACqM,QAAD,CAAD,CAAYoL,UAAZ,EAAT,EAAmCG,cAAnC,CAApB;AACAC,MAAAA,eAAe,GAAGE,cAAlB;AACAH,MAAAA,cAAc,GAAGM,aAAjB;AACH;;AACD,WAAO;AACHlT,MAAAA,KAAK,EAAE4S,cAAc,GAAGJ,YADrB;AAEHnQ,MAAAA,MAAM,EAAEwQ,eAAe,GAAGH;AAFvB,KAAP;AAIH,GA5tBwB;AA6tBzBlC,EAAAA,kBAAkB,EAAE,UAASlQ,CAAT,EAAY;AAC5B,QAAIY,MAAM,GAAGZ,CAAC,CAACY,MAAf;AACA,QAAIiS,UAAU,GAAG,KAAKpB,WAAtB;AACA,QAAIqB,YAAY,GAAG;AACftU,MAAAA,GAAG,EAAEoC,MAAM,CAAC+Q,CAAP,GAAWkB,UAAU,CAAClB,CADZ;AAEf9S,MAAAA,IAAI,EAAE+B,MAAM,CAAC8Q,CAAP,GAAWmB,UAAU,CAACnB;AAFb,KAAnB;;AAIA,SAAK7Q,eAAL,CAAqBiS,YAArB;;AACA,SAAKrB,WAAL,GAAmB7Q,MAAnB;AACH,GAtuBwB;AAuuBzBC,EAAAA,eAAe,EAAE,UAASD,MAAT,EAAiB;AAC9B,QAAIgB,QAAQ,GAAGzH,MAAM,CAAC,KAAKuK,SAAN,CAArB;AACAtK,IAAAA,IAAI,CAAC,KAAKsK,SAAN,EAAiB;AACjB7F,MAAAA,IAAI,EAAE+C,QAAQ,CAAC/C,IAAT,GAAgB+B,MAAM,CAAC/B,IADZ;AAEjBL,MAAAA,GAAG,EAAEoD,QAAQ,CAACpD,GAAT,GAAeoC,MAAM,CAACpC;AAFV,KAAjB,CAAJ;AAIA,SAAKiS,sBAAL,GAA8B,IAA9B;AACH,GA9uBwB;AA+uBzB9P,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAIiB,QAAQ,GAAGzH,MAAM,CAAC,KAAKuK,SAAN,CAArB;;AACA,QAAIqO,SAAS,GAAG,KAAKd,UAAL,EAAhB;;AACA,QAAIe,aAAa,GAAGD,SAAS,CAAChR,MAAV,IAAoB,CAApB,IAAyBgR,SAAS,CAACrT,KAAV,IAAmB,CAAhE;AACA,QAAIuT,YAAY,GAAG,KAAK1S,MAAL,CAAY,SAAZ,KAA0B,CAAC,KAAKA,MAAL,CAAY,WAAZ,CAA3B,IAAuD,CAAC,KAAKiS,SAAL,CAAe,KAAKU,aAAL,EAAf,CAAxD,GAA+F/Y,MAAM,CAAC,KAAKqK,SAAN,CAArG,GAAwH;AACvIhG,MAAAA,GAAG,EAAE,CADkI;AAEvIK,MAAAA,IAAI,EAAE;AAFiI,KAA3I;AAIA,QAAI6E,cAAc,GAAG,KAAKnD,MAAL,CAAY,gBAAZ,CAArB;AACA,WAAO;AACH/B,MAAAA,GAAG,EAAEwU,aAAa,GAAGpR,QAAQ,CAACpD,GAAT,GAAeyU,YAAY,CAACzU,GAA5B,GAAkCkF,cAAc,CAACE,CAApD,GAAwD,CADvE;AAEHjF,MAAAA,MAAM,EAAEqU,aAAa,GAAG,CAACpR,QAAQ,CAACpD,GAAV,GAAgByU,YAAY,CAACzU,GAA7B,GAAmCuU,SAAS,CAAChR,MAA7C,GAAsD2B,cAAc,CAACE,CAAxE,GAA4E,CAF9F;AAGH/E,MAAAA,IAAI,EAAEmU,aAAa,GAAGpR,QAAQ,CAAC/C,IAAT,GAAgBoU,YAAY,CAACpU,IAA7B,GAAoC6E,cAAc,CAACC,CAAtD,GAA0D,CAH1E;AAIH/E,MAAAA,KAAK,EAAEoU,aAAa,GAAG,CAACpR,QAAQ,CAAC/C,IAAV,GAAiBoU,YAAY,CAACpU,IAA9B,GAAqCkU,SAAS,CAACrT,KAA/C,GAAuDgE,cAAc,CAACC,CAAzE,GAA6E;AAJ9F,KAAP;AAMH,GA9vBwB;AA+vBzBoI,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,SAAKrH,SAAL,CAAe+J,QAAf,CAAwB,KAAKhP,QAAL,EAAxB;;AACA,SAAK0T,yBAAL;AACH,GAlwBwB;AAmwBzBA,EAAAA,yBAAyB,EAAE,YAAW;AAClC,SAAK3O,SAAL,CAAe4O,MAAf;AACH,GArwBwB;AAswBzBpH,EAAAA,gBAAgB,EAAE,YAAW;AACzB,SAAKqH,yBAAL;;AACA,SAAK3O,SAAL,CAAe+J,QAAf,CAAwB,KAAKjK,SAA7B;AACH,GAzwBwB;AA0wBzB6O,EAAAA,yBAAyB,EAAE,YAAW;AAClC,QAAI5T,QAAQ,GAAG,KAAKA,QAAL,EAAf;AACA,QAAI6T,gBAAgB,GAAG,KAAK,CAAL,KAAW,KAAK/S,MAAL,CAAY,WAAZ,CAAlC;AACA,QAAIgT,eAAe,GAAGD,gBAAgB,GAAG,KAAKrN,WAAR,GAAsB/I,MAAM,CAACsW,kBAAP,CAA0B/T,QAA1B,CAA5D;;AACA,QAAI8T,eAAe,IAAIA,eAAe,CAAC,CAAD,CAAf,KAAuB9T,QAAQ,CAACyG,MAAT,GAAkB,CAAlB,CAA9C,EAAoE;AAChEqN,MAAAA,eAAe,GAAG9T,QAAlB;AACH;;AACD,SAAK+E,SAAL,CAAeiK,QAAf,CAAwB8E,eAAxB;AACH,GAlxBwB;AAmxBzBE,EAAAA,uCAAuC,EAAE,YAAW;AAChD,QAAI,KAAKjB,SAAL,CAAe,KAAKU,aAAL,EAAf,KAAwC5T,mBAA5C,EAAiE;AAC7D,WAAKkF,SAAL,CAAeyG,GAAf,CAAmB,WAAnB,EAAgC1N,MAAM,CAACmW,WAAvC;AACH;AACJ,GAvxBwB;AAwxBzBzH,EAAAA,eAAe,EAAE,UAAS0H,kBAAT,EAA6B;AAC1C,QAAI,KAAKpT,MAAL,CAAY,SAAZ,KAA0BtE,SAAS,EAAvC,EAA2C;AACvC,WAAK2X,mBAAL,CAAyBD,kBAAzB;AACH;AACJ,GA5xBwB;AA6xBzBC,EAAAA,mBAAmB,EAAE,UAASD,kBAAT,EAA6B;AAC9C,SAAK9M,cAAL;;AACA,SAAK6B,kBAAL;;AACA,SAAKmL,cAAL;;AACA,SAAKJ,uCAAL;;AACA,SAAKK,iBAAL;;AACA,QAAIC,cAAc,GAAG,KAAKC,eAAL,EAArB;;AACA,SAAK3N,QAAL,CAAc5C,YAAd,CAA2B;AACvB7B,MAAAA,QAAQ,EAAEmS;AADa,KAA3B;AAGH,GAvyBwB;AAwyBzBE,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,SAAKzP,SAAL,CAAeyG,GAAf,CAAmB,UAAnB,EAA+B,KAAKiJ,iBAAL,KAA2B,OAA3B,GAAqC,UAApE;AACH,GA1yBwB;AA2yBzBA,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,WAAO,KAAKC,sBAAL,MAAiC,KAAK5T,MAAL,CAAY,gBAAZ,CAAxC;AACH,GA7yBwB;AA8yBzB4T,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,QAAIrO,UAAU,GAAG,KAAKoN,aAAL,EAAjB;;AACA,WAAO,KAAKV,SAAL,CAAe1M,UAAf,MAA+B,CAAC1G,GAAD,IAAQ,KAAK,CAAL,KAAW,KAAKgV,cAAvD,CAAP;AACH,GAjzBwB;AAkzBzBjK,EAAAA,sBAAsB,EAAE,UAASkK,gBAAT,EAA2B;AAC/C,QAAIjV,GAAG,IAAI,KAAK+U,sBAAL,EAAX,EAA0C;AACtC,UAAIG,IAAI,GAAG9Z,UAAU,CAACuU,OAAX,EAAX;;AACA,UAAIsF,gBAAJ,EAAsB;AAClB3Z,QAAAA,CAAC,CAAC4Z,IAAD,CAAD,CAAQC,WAAR,CAAoBlW,8BAApB;AACAd,QAAAA,MAAM,CAACiX,QAAP,CAAgB,CAAhB,EAAmB,KAAKJ,cAAxB;AACA,aAAKA,cAAL,GAAsB,KAAK,CAA3B;AACH,OAJD,MAIO,IAAI,KAAK7T,MAAL,CAAY,SAAZ,CAAJ,EAA4B;AAC/B,aAAK6T,cAAL,GAAsB7W,MAAM,CAACkX,WAA7B;AACA/Z,QAAAA,CAAC,CAAC4Z,IAAD,CAAD,CAAQvP,QAAR,CAAiB1G,8BAAjB;AACH;AACJ;AACJ,GA9zBwB;AA+zBzBwV,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKI,mBAAL;;AACA,SAAKS,wBAAL;;AACA,SAAKC,sBAAL;AACH,GAn0BwB;AAo0BzBD,EAAAA,wBAAwB,EAAE,YAAW;AACjC,QAAIE,YAAJ;AACA,QAAIC,aAAJ;;AACA,QAAI/O,UAAU,GAAG,KAAKoN,aAAL,EAAjB;;AACA,QAAI,CAACpN,UAAL,EAAiB;AACb;AACH;;AACD,QAAIpK,QAAQ,GAAG,KAAK8W,SAAL,CAAe1M,UAAf,CAAf;;AACA8O,IAAAA,YAAY,GAAGlZ,QAAQ,GAAG,EAAH,GAAQoK,UAAU,CAACqM,UAAX,EAA/B,EAAwD0C,aAAa,GAAGnZ,QAAQ,GAAG,EAAH,GAAQoK,UAAU,CAACuM,WAAX,EAAxF;;AACA,SAAK7N,SAAL,CAAeyG,GAAf,CAAmB;AACfvL,MAAAA,KAAK,EAAEkV,YADQ;AAEf7S,MAAAA,MAAM,EAAE8S;AAFO,KAAnB;AAIH,GAj1BwB;AAk1BzBrC,EAAAA,SAAS,EAAE,UAAS/S,QAAT,EAAmB;AAC1B,WAAO,CAAC,CAACA,QAAF,IAAc/D,QAAQ,CAAC+D,QAAQ,CAAC0H,GAAT,CAAa,CAAb,CAAD,CAA7B;AACH,GAp1BwB;AAq1BzBwN,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,QAAI7O,UAAU,GAAG,KAAKoN,aAAL,EAAjB;;AACA,QAAIpN,UAAJ,EAAgB;AACZ5L,MAAAA,aAAa,CAAC4a,KAAd,CAAoB,KAAKtQ,SAAzB,EAAoC;AAChC/F,QAAAA,EAAE,EAAE,UAD4B;AAEhCC,QAAAA,EAAE,EAAE,UAF4B;AAGhCoP,QAAAA,EAAE,EAAEhI;AAH4B,OAApC;AAKH;AACJ,GA91BwB;AA+1BzBoN,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAItR,QAAQ,GAAG,KAAK+G,SAApB;AACA,QAAIrF,SAAS,GAAG,KAAK/C,MAAL,CAAY,WAAZ,CAAhB;AACA,QAAIwU,UAAU,GAAG,IAAjB;;AACA,QAAI,CAACzR,SAAD,IAAc1B,QAAlB,EAA4B;AACxBmT,MAAAA,UAAU,GAAGpZ,OAAO,CAACiG,QAAQ,CAACkM,EAAV,CAAP,GAAuBvQ,MAAvB,GAAgCqE,QAAQ,CAACkM,EAAT,IAAevQ,MAA5D;AACH;;AACD,WAAOoC,UAAU,CAAC2D,SAAS,IAAIyR,UAAd,CAAjB;AACH,GAv2BwB;AAw2BzBjB,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,QAAIrM,OAAO,GAAG,KAAK/C,SAAL,CAAeyC,GAAf,CAAmB,CAAnB,CAAd;;AACA,SAAKzC,SAAL,CAAeuG,GAAf,CAAmB;AACfpJ,MAAAA,QAAQ,EAAE,KAAKmT,eAAL,CAAqB,UAArB,EAAiCvN,OAAjC,CADK;AAEf3F,MAAAA,QAAQ,EAAE,KAAKkT,eAAL,CAAqB,UAArB,EAAiCvN,OAAjC,CAFK;AAGfzF,MAAAA,SAAS,EAAE,KAAKgT,eAAL,CAAqB,WAArB,EAAkCvN,OAAlC,CAHI;AAIfxF,MAAAA,SAAS,EAAE,KAAK+S,eAAL,CAAqB,WAArB,EAAkCvN,OAAlC,CAJI;AAKf/H,MAAAA,KAAK,EAAE,KAAKsV,eAAL,CAAqB,OAArB,EAA8BvN,OAA9B,CALQ;AAMf1F,MAAAA,MAAM,EAAE,KAAKiT,eAAL,CAAqB,QAArB,EAA+BvN,OAA/B;AANO,KAAnB;AAQH,GAl3BwB;AAm3BzBuM,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI,KAAKvD,sBAAT,EAAiC;AAC7B,UAAI/P,cAAc,GAAG,KAAKC,eAAL,EAArB;;AACA,WAAKE,eAAL,CAAqB;AACjBrC,QAAAA,GAAG,EAAEpD,YAAY,CAAC,CAAD,EAAI,CAACsF,cAAc,CAAClC,GAApB,EAAyBkC,cAAc,CAAC/B,MAAxC,CADA;AAEjBE,QAAAA,IAAI,EAAEzD,YAAY,CAAC,CAAD,EAAI,CAACsF,cAAc,CAAC7B,IAApB,EAA0B6B,cAAc,CAAC9B,KAAzC;AAFD,OAArB;AAIH,KAND,MAMO;AACH,WAAKqW,4BAAL;;AACA5a,MAAAA,aAAa,CAAC,KAAKqK,SAAN,CAAb;;AACA,UAAI9C,QAAQ,GAAG,KAAKsT,wBAAL,CAA8B,KAAKvM,SAAnC,EAA8CpK,gBAA9C,CAAf;;AACA,UAAIwV,cAAc,GAAG7Z,aAAa,CAAC4a,KAAd,CAAoB,KAAKpQ,SAAzB,EAAoC9C,QAApC,CAArB;AACApC,MAAAA,YAAY,CAAC,KAAKkF,SAAN,CAAZ;AACA,aAAOqP,cAAP;AACH;AACJ,GAl4BwB;AAm4BzBmB,EAAAA,wBAAwB,EAAE,UAAStT,QAAT,EAAmBuT,eAAnB,EAAoC;AAC1D,QAAI7Z,QAAQ,CAACsG,QAAD,CAAZ,EAAwB;AACpBA,MAAAA,QAAQ,GAAG1G,MAAM,CAAC,EAAD,EAAKia,eAAe,CAACvT,QAAD,CAApB,CAAjB;AACH;;AACD,WAAOA,QAAP;AACH,GAx4BwB;AAy4BzBqT,EAAAA,4BAA4B,EAAE,YAAW;AACrC,QAAIvR,cAAc,GAAG,KAAKnD,MAAL,CAAY,gBAAZ,CAArB;;AACA,SAAKmE,SAAL,CAAeuG,GAAf,CAAmB,QAAnB,EAA6BvH,cAAc,CAACE,CAAf,GAAmB,KAAnB,GAA2BF,cAAc,CAACC,CAA1C,GAA8C,IAA3E;AACH,GA54BwB;AA64BzBsG,EAAAA,YAAY,EAAE,YAAW;AACrB,WAAO,KAAKvF,SAAZ;AACH,GA/4BwB;AAg5BzB0Q,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,SAAKC,mBAAL,GAA2B9Y,QAAQ,CAAC2I,EAAT,CAAY,KAAKR,SAAjB,EAA4B,IAA5B,EAAkC4Q,IAAI,IAAI,KAAKC,gBAAL,CAAsBD,IAAtB,CAA1C,CAA3B;AACH,GAl5BwB;AAm5BzBC,EAAAA,gBAAgB,EAAE,UAASnR,OAAT,EAAkB;AAChC,QAAIpE,CAAC,GAAGoE,OAAO,CAAC8M,aAAhB;AACA,QAAIsE,OAAO,GAAG9a,CAAC,CAACsF,CAAC,CAACJ,MAAH,CAAf;;AACA,QAAI4V,OAAO,CAACxO,EAAR,CAAW,KAAKtC,SAAhB,KAA8B,CAAC,KAAKnE,MAAL,CAAY,mBAAZ,CAAnC,EAAqE;AACjE,WAAKO,QAAL,CAAc,GAAG6F,SAAjB;AACH;AACJ,GAz5BwB;AA05BzB8O,EAAAA,UAAU,EAAE,YAAW;AACnB,WAAO,KAAKlV,MAAL,CAAY,SAAZ,CAAP;AACH,GA55BwB;AA65BzBmV,EAAAA,kBAAkB,EAAE,UAASlU,OAAT,EAAkB;AAClC,QAAIA,OAAJ,EAAa;AACT,UAAI,KAAKjB,MAAL,CAAY,SAAZ,CAAJ,EAA4B;AACxB,aAAKgI,wBAAL,CAA8B/G,OAA9B;AACH;AACJ,KAJD,MAIO;AACH,WAAK+G,wBAAL,CAA8B/G,OAA9B;AACH;AACJ,GAr6BwB;AAs6BzBmU,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,SAAK1J,eAAL,CAAqB,IAArB;AACH,GAx6BwB;AAy6BzB2J,EAAAA,MAAM,EAAE,YAAW;AACf,QAAI,CAAC,KAAKhH,uBAAV,EAAmC;AAC/B,WAAKW,QAAL,GAAgBsG,KAAhB;AACH;;AACD,SAAKhM,iBAAL,CAAuB,KAAvB;;AACA,SAAKO,cAAL;;AACA,SAAK0L,gBAAL;AACH,GAh7BwB;;AAi7BzB1L,EAAAA,cAAc,GAAG;AACb,QAAI,KAAKC,iBAAT,EAA4B;AACxB0L,MAAAA,YAAY,CAAC,KAAK1L,iBAAN,CAAZ;AACH;;AACD,SAAKA,iBAAL,GAAyB,IAAzB;AACH,GAt7BwB;;AAu7BzB2L,EAAAA,QAAQ,EAAE,YAAW;AACjB/b,IAAAA,EAAE,CAACyR,IAAH,CAAQ,KAAKhH,SAAb,EAAwB,KAAxB;AACAqR,IAAAA,YAAY,CAAC,KAAKE,eAAN,CAAZ;;AACA,SAAK9Q,2BAAL,CAAiC,KAAjC;;AACA,SAAK4F,oBAAL,CAA0B,KAA1B;;AACA,SAAKa,0BAAL,CAAgC,KAAhC;;AACA,SAAKY,oBAAL,CAA0B,KAA1B;;AACA,SAAKrC,sBAAL,CAA4B,IAA5B;;AACA,SAAK9D,QAAL,GAAgB,IAAhB;AACA,SAAKvF,QAAL;AACA1D,IAAAA,UAAU,CAAC+K,MAAX,CAAkB,KAAKiE,OAAvB;;AACA,SAAK5H,SAAL,CAAe2D,MAAf;;AACA,SAAKzD,SAAL,CAAeyD,MAAf;AACH,GAp8BwB;AAq8BzB+N,EAAAA,oBAAoB,EAAE,UAASpa,KAAT,EAAgB;AAClC,SAAKgF,QAAL,CAAc,GAAG6F,SAAjB;;AACA,SAAKjC,SAAL,CAAec,WAAf,CAA2BpH,oBAA3B,EAAiD+X,OAAO,CAACra,KAAD,CAAxD;AACH,GAx8BwB;AAy8BzBsa,EAAAA,mBAAmB,EAAE,UAASC,GAAT,EAAc;AAC/B,SAAK3R,SAAL,CAAec,WAAf,CAA2BvH,mBAA3B,EAAgDoY,GAAhD;AACH,GA38BwB;AA48BzBC,EAAAA,cAAc,EAAE,UAASC,IAAT,EAAe;AAC3B,QAAIza,KAAK,GAAGya,IAAI,CAACza,KAAjB;;AACA,QAAIlB,OAAO,CAAC2b,IAAI,CAACC,IAAN,EAAYtY,OAAZ,CAAP,GAA8B,CAAC,CAAnC,EAAsC;AAClC,WAAK0G,YAAL;;AACA;AACH;;AACD,YAAQ2R,IAAI,CAACC,IAAb;AACI,WAAK,aAAL;AACI,aAAK9G,WAAL;;AACA,aAAKzD,eAAL;;AACA;;AACJ,WAAK,eAAL;AACI,aAAK0D,aAAL;;AACA,aAAK1D,eAAL;;AACA;;AACJ,WAAK,SAAL;AACA,WAAK,cAAL;AACI,aAAKnB,cAAL,CAAoB,KAAKvK,MAAL,CAAY,SAAZ,CAApB;;AACA;;AACJ,WAAK,OAAL;AACA,WAAK,QAAL;AACA,WAAK,UAAL;AACA,WAAK,UAAL;AACA,WAAK,WAAL;AACA,WAAK,WAAL;AACA,WAAK,gBAAL;AACI,aAAK0L,eAAL;;AACA;;AACJ,WAAK,UAAL;AACI,aAAKwE,sBAAL,GAA8B,KAA9B;;AACA,aAAKxE,eAAL;;AACA;;AACJ,WAAK,SAAL;AACI,aAAK1D,wBAAL,CAA8BzM,KAA9B,EAAqCmN,IAArC,CAA0C,MAAM;AAC5C,cAAI,CAAC,KAAKwN,gBAAV,EAA4B;AACxB;AACH;;AACD,eAAKA,gBAAL,CAAsBC,WAAtB,CAAkC,IAAlC;AACH,SALD;;AAMA;;AACJ,WAAK,QAAL;AACI,aAAKpR,WAAL,CAAiBxJ,KAAjB;;AACA,aAAK6a,WAAL;;AACA;;AACJ,WAAK,WAAL;AACI,aAAKpR,cAAL,CAAoBzJ,KAApB;;AACA,aAAK6a,WAAL;;AACA;;AACJ,WAAK,cAAL;AACI,aAAK3R,sBAAL;;AACA;;AACJ,WAAK,gBAAL;AACA,WAAK,iBAAL;AACI,aAAK4J,uBAAL,GAA+B,KAA/B;;AACA,aAAKgH,MAAL;;AACA,aAAKe,WAAL;;AACA;;AACJ,WAAK,uBAAL;AACI,aAAKhJ,6BAAL,CAAmC,KAAnC;;AACA,aAAKvI,0BAAL,CAAgCmR,IAAI,CAACza,KAArC;;AACA,aAAK6R,6BAAL,CAAmC,KAAKpN,MAAL,CAAY,SAAZ,CAAnC;;AACA;;AACJ,WAAK,qBAAL;AACI,aAAKqN,gCAAL,CAAsC,KAAKrN,MAAL,CAAY,SAAZ,CAAtC;;AACA;;AACJ,WAAK,qBAAL;AACA,WAAK,WAAL;AACA,WAAK,uBAAL;AACI;;AACJ,WAAK,YAAL;AACI,aAAKqO,uBAAL,GAA+B,KAA/B;AACA,aAAK9N,QAAL,CAAcyV,IAAd;AACA;;AACJ,WAAK,gBAAL;AACI,aAAKtC,mBAAL;;AACA;;AACJ;AACI,aAAKnT,QAAL,CAAcyV,IAAd;AAvER;AAyEH,GA3hCwB;AA4hCzBrO,EAAAA,MAAM,EAAE,UAAS0O,OAAT,EAAkB;AACtBA,IAAAA,OAAO,GAAG,KAAK,CAAL,KAAWA,OAAX,GAAqB,CAAC,KAAKrW,MAAL,CAAY,SAAZ,CAAtB,GAA+CqW,OAAzD;AACA,QAAI3J,MAAM,GAAG,IAAIlS,QAAJ,EAAb;;AACA,QAAI6b,OAAO,KAAK,KAAKrW,MAAL,CAAY,SAAZ,CAAhB,EAAwC;AACpC,aAAO0M,MAAM,CAACyJ,WAAP,CAAmB,IAAnB,EAAyB,CAACE,OAAD,CAAzB,EAAoCvN,OAApC,EAAP;AACH;;AACD,QAAIwN,eAAe,GAAG,IAAI9b,QAAJ,EAAtB;AACA,SAAK0b,gBAAL,GAAwBI,eAAxB;AACA,SAAKtW,MAAL,CAAY,SAAZ,EAAuBqW,OAAvB;AACAC,IAAAA,eAAe,CAACxN,OAAhB,GAA0BJ,IAA1B,CAA+B,MAAM;AACjC,aAAO,KAAKwN,gBAAZ;AACAxJ,MAAAA,MAAM,CAACyJ,WAAP,CAAmB,IAAnB,EAAyB,CAAC,KAAKnW,MAAL,CAAY,SAAZ,CAAD,CAAzB;AACH,KAHD;AAIA,WAAO0M,MAAM,CAAC5D,OAAP,EAAP;AACH,GA1iCwB;AA2iCzBkG,EAAAA,QAAQ,EAAE,YAAW;AACjB,WAAO,KAAK7K,SAAZ;AACH,GA7iCwB;AA8iCzBvC,EAAAA,IAAI,EAAE,YAAW;AACb,WAAO,KAAK+F,MAAL,CAAY,IAAZ,CAAP;AACH,GAhjCwB;AAijCzBlH,EAAAA,IAAI,EAAE,YAAW;AACb,WAAO,KAAKkH,MAAL,CAAY,KAAZ,CAAP;AACH,GAnjCwB;AAojCzBT,EAAAA,OAAO,EAAE,YAAW;AAChB,WAAOhN,gBAAgB,CAAC,KAAKiK,SAAN,CAAvB;AACH,GAtjCwB;AAujCzBoS,EAAAA,OAAO,EAAE,YAAW;AAChB,QAAI,KAAKlI,uBAAT,EAAkC;AAC9B,WAAK3C,eAAL;;AACArP,MAAAA,kBAAkB,CAAC,KAAK8H,SAAN,CAAlB;AACH,KAHD,MAGO;AACH,WAAK5D,QAAL;AACH;AACJ;AA9jCwB,CAAf,CAAd;;AAgkCAV,OAAO,CAAC6H,UAAR,GAAqB8O,MAAM,IAAI3Z,UAAU,CAAC4Z,IAAX,CAAgBD,MAAhB,CAA/B;;AACAzc,iBAAiB,CAAC,WAAD,EAAc8F,OAAd,CAAjB;AACA,eAAeA,OAAf","sourcesContent":["/**\r\n * DevExtreme (esm/ui/overlay/ui.overlay.js)\r\n * Version: 21.1.5\r\n * Build date: Mon Aug 02 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport fx from \"../../animation/fx\";\r\nimport positionUtils from \"../../animation/position\";\r\nimport {\r\n    locate,\r\n    move,\r\n    resetPosition\r\n} from \"../../animation/translator\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport devices from \"../../core/devices\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../core/templates/empty_template\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport browser from \"../../core/utils/browser\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    contains,\r\n    resetActiveElement\r\n} from \"../../core/utils/dom\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    fitIntoRange\r\n} from \"../../core/utils/math\";\r\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\r\nimport {\r\n    isString,\r\n    isDefined,\r\n    isFunction,\r\n    isPlainObject,\r\n    isWindow,\r\n    isEvent\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    changeCallback,\r\n    originalViewPort,\r\n    value as viewPort\r\n} from \"../../core/utils/view_port\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    start as dragEventStart,\r\n    move as dragEventMove\r\n} from \"../../events/drag\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    keyboard\r\n} from \"../../events/short\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed,\r\n    normalizeKeyName\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    triggerHidingEvent,\r\n    triggerResizeEvent,\r\n    triggerShownEvent\r\n} from \"../../events/visibility_change\";\r\nimport {\r\n    hideCallback as hideTopOverlayCallback\r\n} from \"../../mobile/hide_callback\";\r\nimport Resizable from \"../resizable\";\r\nimport {\r\n    tabbable\r\n} from \"../widget/selectors\";\r\nimport swatch from \"../widget/swatch_container\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport * as zIndexPool from \"./z_index\";\r\nvar ready = readyCallbacks.add;\r\nvar window = getWindow();\r\nvar viewPortChanged = changeCallback;\r\nvar OVERLAY_CLASS = \"dx-overlay\";\r\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\r\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\r\nvar OVERLAY_MODAL_CLASS = \"dx-overlay-modal\";\r\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\r\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"];\r\nvar OVERLAY_STACK = [];\r\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\r\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\r\nvar TAB_KEY = \"tab\";\r\nvar POSITION_ALIASES = {\r\n    top: {\r\n        my: \"top center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"bottom center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"right center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"left center\",\r\n        at: \"left center\"\r\n    },\r\n    center: {\r\n        my: \"center\",\r\n        at: \"center\"\r\n    },\r\n    \"right bottom\": {\r\n        my: \"right bottom\",\r\n        at: \"right bottom\"\r\n    },\r\n    \"right top\": {\r\n        my: \"right top\",\r\n        at: \"right top\"\r\n    },\r\n    \"left bottom\": {\r\n        my: \"left bottom\",\r\n        at: \"left bottom\"\r\n    },\r\n    \"left top\": {\r\n        my: \"left top\",\r\n        at: \"left top\"\r\n    }\r\n};\r\nvar realDevice = devices.real();\r\nvar firefoxDesktop = browser.mozilla && \"desktop\" === realDevice.deviceType;\r\nvar iOS = \"ios\" === realDevice.platform;\r\nvar hasSafariAddressBar = browser.safari && \"desktop\" !== realDevice.deviceType;\r\nvar forceRepaint = $element => {\r\n    if (firefoxDesktop) {\r\n        $element.width()\r\n    }\r\n};\r\nvar getElement = value => {\r\n    if (isEvent(value)) {\r\n        value = value.target\r\n    }\r\n    return $(value)\r\n};\r\nready(() => {\r\n    eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\r\n        for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    })\r\n});\r\nvar Overlay = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        var move = function(top, left, e) {\r\n            if (!this.option(\"dragEnabled\")) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var allowedOffsets = this._allowedOffsets();\r\n            var offset = {\r\n                top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)\r\n            };\r\n            this._changePosition(offset)\r\n        };\r\n        return extend(this.callBase(), {\r\n            escape: function() {\r\n                this.hide()\r\n            },\r\n            upArrow: move.bind(this, -5, 0),\r\n            downArrow: move.bind(this, 5, 0),\r\n            leftArrow: move.bind(this, 0, -5),\r\n            rightArrow: move.bind(this, 0, 5)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            position: {\r\n                my: \"center\",\r\n                at: \"center\"\r\n            },\r\n            width: function() {\r\n                return .8 * $(window).width()\r\n            },\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: function() {\r\n                return .8 * $(window).height()\r\n            },\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    },\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            dragEnabled: false,\r\n            resizeEnabled: false,\r\n            onResizeStart: null,\r\n            onResize: null,\r\n            onResizeEnd: null,\r\n            innerOverlay: false,\r\n            target: void 0,\r\n            container: void 0,\r\n            hideTopOverlayHandler: () => {\r\n                this.hide()\r\n            },\r\n            closeOnTargetScroll: false,\r\n            onPositioned: null,\r\n            boundaryOffset: {\r\n                h: 0,\r\n                v: 0\r\n            },\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true,\r\n            _fixedPosition: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !hasWindow()\r\n            },\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    },\r\n    $wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _eventBindingTarget: function() {\r\n        return this._$content\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions();\r\n        this._initCloseOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\r\n        this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\r\n        this._initInnerOverlayClass();\r\n        var $element = this.$element();\r\n        this._$wrapper.addClass($element.attr(\"class\"));\r\n        $element.addClass(OVERLAY_CLASS);\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        eventsEngine.on(this._$wrapper, \"MSPointerDown\", noop);\r\n        eventsEngine.on(this._$wrapper, \"focusin\", e => {\r\n            e.stopPropagation()\r\n        });\r\n        this._toggleViewPortSubscription(true);\r\n        this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"))\r\n    },\r\n    _initOptions: function(options) {\r\n        this._initTarget(options.target);\r\n        var container = void 0 === options.container ? this.option(\"container\") : options.container;\r\n        this._initContainer(container);\r\n        this.callBase(options)\r\n    },\r\n    _initInnerOverlayClass: function() {\r\n        this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"))\r\n    },\r\n    _initTarget: function(target) {\r\n        if (!isDefined(target)) {\r\n            return\r\n        }\r\n        var options = this.option();\r\n        each([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], (_, path) => {\r\n            var pathParts = path.split(\".\");\r\n            var option = options;\r\n            while (option) {\r\n                if (1 === pathParts.length) {\r\n                    if (isPlainObject(option)) {\r\n                        option[pathParts.shift()] = target\r\n                    }\r\n                    break\r\n                } else {\r\n                    option = option[pathParts.shift()]\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _initContainer: function(container) {\r\n        container = void 0 === container ? viewPort() : container;\r\n        var $element = this.$element();\r\n        var $container = $element.closest(container);\r\n        if (!$container.length) {\r\n            $container = $(container).first()\r\n        }\r\n        this._$container = $container.length ? $container : $element.parent()\r\n    },\r\n    _initHideTopOverlayHandler: function(handler) {\r\n        this._hideTopOverlayHandler = handler\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        each(ACTIONS, (_, action) => {\r\n            this._actions[action] = this._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || noop\r\n        })\r\n    },\r\n    _initCloseOnOutsideClickHandler: function() {\r\n        var that = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return that._documentDownHandler(...arguments)\r\n        }\r\n    },\r\n    _documentDownHandler: function(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n        if (isFunction(closeOnOutsideClick)) {\r\n            closeOnOutsideClick = closeOnOutsideClick(e)\r\n        }\r\n        var $container = this._$content;\r\n        var isAttachedTarget = $(window.document).is(e.target) || contains(window.document, e.target);\r\n        var isInnerOverlay = $(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length;\r\n        var outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || contains($container.get(0), e.target));\r\n        if (outsideClick && closeOnOutsideClick) {\r\n            this._outsideClickHandler(e)\r\n        }\r\n        return this.option(\"propagateOutsideClick\")\r\n    },\r\n    _outsideClickHandler(e) {\r\n        if (this.option(\"shading\")) {\r\n            e.preventDefault()\r\n        }\r\n        this.hide()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new EmptyTemplate\r\n        });\r\n        this.callBase()\r\n    },\r\n    _isTopOverlay: function() {\r\n        var overlayStack = this._overlayStack();\r\n        for (var i = overlayStack.length - 1; i >= 0; i--) {\r\n            var tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _overlayStack: function() {\r\n        return OVERLAY_STACK\r\n    },\r\n    _zIndexInitValue: function() {\r\n        return Overlay.baseZIndex()\r\n    },\r\n    _toggleViewPortSubscription: function(toggle) {\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    },\r\n    _viewPortChangeHandler: function() {\r\n        this._initContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    },\r\n    _renderVisibilityAnimate: function(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    },\r\n    _normalizePosition: function() {\r\n        var position = this.option(\"position\");\r\n        this._position = \"function\" === typeof position ? position() : position\r\n    },\r\n    _getAnimationConfig: function() {\r\n        var animation = this.option(\"animation\");\r\n        if (isFunction(animation)) {\r\n            animation = animation.call(this)\r\n        }\r\n        return animation\r\n    },\r\n    _show: function() {\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        this._parentHidden = this._isParentHidden();\r\n        deferred.done(() => {\r\n            delete that._parentHidden\r\n        });\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return deferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        this._isShown = false;\r\n        this._normalizePosition();\r\n        var animation = that._getAnimationConfig() || {};\r\n        var showAnimation = this._normalizeAnimation(animation.show, \"to\");\r\n        var startShowAnimation = showAnimation && showAnimation.start || noop;\r\n        var completeShowAnimation = showAnimation && showAnimation.complete || noop;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            deferred.resolve()\r\n        } else {\r\n            var show = () => {\r\n                this._renderVisibility(true);\r\n                if (this._isShowingActionCanceled) {\r\n                    delete this._isShowingActionCanceled;\r\n                    deferred.resolve();\r\n                    return\r\n                }\r\n                this._animate(showAnimation, (function() {\r\n                    if (that.option(\"focusStateEnabled\")) {\r\n                        eventsEngine.trigger(that._focusTarget(), \"focus\")\r\n                    }\r\n                    completeShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = false;\r\n                    that._isShown = true;\r\n                    that._actions.onShown();\r\n                    that._toggleSafariScrolling(false);\r\n                    deferred.resolve()\r\n                }), (function() {\r\n                    startShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = true\r\n                }))\r\n            };\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _normalizeAnimation: function(animation, prop) {\r\n        if (animation) {\r\n            animation = extend({\r\n                type: \"slide\"\r\n            }, animation);\r\n            if (animation[prop] && \"object\" === typeof animation[prop]) {\r\n                extend(animation[prop], {\r\n                    position: this._position\r\n                })\r\n            }\r\n        }\r\n        return animation\r\n    },\r\n    _hide: function() {\r\n        if (!this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        var animation = that._getAnimationConfig() || {};\r\n        var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\r\n        var startHideAnimation = hideAnimation && hideAnimation.start || noop;\r\n        var completeHideAnimation = hideAnimation && hideAnimation.complete || noop;\r\n        var hidingArgs = {\r\n            cancel: false\r\n        };\r\n        if (this._isShowingActionCanceled) {\r\n            deferred.resolve()\r\n        } else {\r\n            this._actions.onHiding(hidingArgs);\r\n            that._toggleSafariScrolling(true);\r\n            if (hidingArgs.cancel) {\r\n                this._isHidingActionCanceled = true;\r\n                this.option(\"visible\", true);\r\n                deferred.resolve()\r\n            } else {\r\n                this._forceFocusLost();\r\n                this._toggleShading(false);\r\n                this._toggleSubscriptions(false);\r\n                this._stopShowTimer();\r\n                this._animate(hideAnimation, (function() {\r\n                    var _that$_actions;\r\n                    that._$content.css(\"pointerEvents\", \"\");\r\n                    that._renderVisibility(false);\r\n                    completeHideAnimation.apply(this, arguments);\r\n                    that._hideAnimationProcessing = false;\r\n                    null === (_that$_actions = that._actions) || void 0 === _that$_actions ? void 0 : _that$_actions.onHidden();\r\n                    deferred.resolve()\r\n                }), (function() {\r\n                    that._$content.css(\"pointerEvents\", \"none\");\r\n                    startHideAnimation.apply(this, arguments);\r\n                    that._hideAnimationProcessing = true\r\n                }))\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _forceFocusLost: function() {\r\n        var activeElement = domAdapter.getActiveElement();\r\n        var shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            resetActiveElement()\r\n        }\r\n    },\r\n    _animate: function(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || noop;\r\n            fx.animate(this._$content, extend({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    },\r\n    _stopAnimation: function() {\r\n        fx.stop(this._$content, true)\r\n    },\r\n    _renderVisibility: function(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            triggerHidingEvent(this._$content)\r\n        }\r\n        this._toggleVisibility(visible);\r\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\r\n        this._updateZIndexStackPosition(visible);\r\n        if (visible) {\r\n            this._renderContent();\r\n            var showingArgs = {\r\n                cancel: false\r\n            };\r\n            this._actions.onShowing(showingArgs);\r\n            if (showingArgs.cancel) {\r\n                this._toggleVisibility(false);\r\n                this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\r\n                this._updateZIndexStackPosition(false);\r\n                this._moveFromContainer();\r\n                this._isShowingActionCanceled = true;\r\n                this.option(\"visible\", false);\r\n                return\r\n            }\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            triggerShownEvent(this._$content);\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    },\r\n    _updateZIndexStackPosition: function(pushToStack) {\r\n        var overlayStack = this._overlayStack();\r\n        var index = inArray(this, overlayStack);\r\n        if (pushToStack) {\r\n            if (-1 === index) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else if (-1 !== index) {\r\n            overlayStack.splice(index, 1);\r\n            zIndexPool.remove(this._zIndex)\r\n        }\r\n    },\r\n    _toggleShading: function(visible) {\r\n        this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\r\n        this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\r\n        this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\r\n        this._toggleTabTerminator(visible && this.option(\"shading\"))\r\n    },\r\n    _initTabTerminatorHandler: function() {\r\n        var that = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            that._tabKeyHandler(...arguments)\r\n        }\r\n    },\r\n    _toggleTabTerminator: function(enabled) {\r\n        var eventName = addNamespace(\"keydown\", this.NAME);\r\n        if (enabled) {\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    },\r\n    _findTabbableBounds: function() {\r\n        var $elements = this._$wrapper.find(\"*\");\r\n        var elementsCount = $elements.length - 1;\r\n        var result = {\r\n            first: null,\r\n            last: null\r\n        };\r\n        for (var i = 0; i <= elementsCount; i++) {\r\n            if (!result.first && $elements.eq(i).is(tabbable)) {\r\n                result.first = $elements.eq(i)\r\n            }\r\n            if (!result.last && $elements.eq(elementsCount - i).is(tabbable)) {\r\n                result.last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (result.first && result.last) {\r\n                break\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tabKeyHandler: function(e) {\r\n        if (normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        var tabbableElements = this._findTabbableBounds();\r\n        var $firstTabbable = tabbableElements.first;\r\n        var $lastTabbable = tabbableElements.last;\r\n        var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\r\n        var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\r\n        var isEmptyTabList = 0 === tabbableElements.length;\r\n        var isOutsideTarget = !contains(this._$wrapper.get(0), e.target);\r\n        if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\r\n            e.preventDefault();\r\n            var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            eventsEngine.trigger($focusElement, \"focusin\");\r\n            eventsEngine.trigger($focusElement, \"focus\")\r\n        }\r\n    },\r\n    _toggleSubscriptions: function(enabled) {\r\n        if (hasWindow()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleParentsScrollSubscription(enabled)\r\n        }\r\n    },\r\n    _toggleHideTopOverlayCallback: function(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe) {\r\n            hideTopOverlayCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            hideTopOverlayCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    },\r\n    _toggleParentsScrollSubscription: function(subscribe) {\r\n        if (!this._position) {\r\n            return\r\n        }\r\n        var target = this._position.of || $();\r\n        var closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        var $parents = getElement(target).parents();\r\n        var scrollEvent = addNamespace(\"scroll\", this.NAME);\r\n        if (\"desktop\" === devices.real().deviceType) {\r\n            $parents = $parents.add(window)\r\n        }\r\n        this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || (e => {\r\n            this._targetParentsScrollHandler(e)\r\n        });\r\n        eventsEngine.off($().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n        if (subscribe && closeOnScroll) {\r\n            eventsEngine.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n            this._$prevTargetParents = $parents\r\n        }\r\n    },\r\n    _targetParentsScrollHandler: function(e) {\r\n        var closeHandled = false;\r\n        var closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        if (isFunction(closeOnScroll)) {\r\n            closeHandled = closeOnScroll(e)\r\n        }\r\n        if (!closeHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    },\r\n    _appendContentToElement: function() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    },\r\n    _renderContent: function() {\r\n        var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        var isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        this.callBase()\r\n    },\r\n    _isParentHidden: function() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        var $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        var isHidden = false;\r\n        $parent.add($parent.parents()).each((function() {\r\n            var $element = $(this);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        }));\r\n        return isHidden || !domAdapter.getBody().contains($parent.get(0))\r\n    },\r\n    _renderContentImpl: function() {\r\n        var whenContentRendered = new Deferred;\r\n        var contentTemplateOption = this.option(\"contentTemplate\");\r\n        var contentTemplate = this._getTemplate(contentTemplateOption);\r\n        var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\r\n        contentTemplate && contentTemplate.render({\r\n            container: getPublicElement(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: () => {\r\n                whenContentRendered.resolve()\r\n            }\r\n        });\r\n        this._renderDrag();\r\n        this._renderResize();\r\n        this._renderScrollTerminator();\r\n        whenContentRendered.done(() => {\r\n            if (this.option(\"visible\")) {\r\n                this._moveToContainer()\r\n            }\r\n        });\r\n        return whenContentRendered.promise()\r\n    },\r\n    _renderDrag: function() {\r\n        var $dragTarget = this._getDragTarget();\r\n        if (!$dragTarget) {\r\n            return\r\n        }\r\n        var startEventName = addNamespace(dragEventStart, this.NAME);\r\n        var updateEventName = addNamespace(dragEventMove, this.NAME);\r\n        eventsEngine.off($dragTarget, startEventName);\r\n        eventsEngine.off($dragTarget, updateEventName);\r\n        if (!this.option(\"dragEnabled\")) {\r\n            return\r\n        }\r\n        eventsEngine.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\r\n        eventsEngine.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this))\r\n    },\r\n    _renderResize: function() {\r\n        this._resizable = this._createComponent(this._$content, Resizable, {\r\n            handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\r\n            onResizeEnd: this._resizeEndHandler.bind(this),\r\n            onResize: this._actions.onResize.bind(this),\r\n            onResizeStart: this._actions.onResizeStart.bind(this),\r\n            minHeight: 100,\r\n            minWidth: 100,\r\n            area: this._getDragResizeContainer()\r\n        })\r\n    },\r\n    _resizeEndHandler: function() {\r\n        this._positionChangeHandled = true;\r\n        var width = this._resizable.option(\"width\");\r\n        var height = this._resizable.option(\"height\");\r\n        width && this.option(\"width\", width);\r\n        height && this.option(\"height\", height);\r\n        this._actions.onResizeEnd()\r\n    },\r\n    _renderScrollTerminator: function() {\r\n        var $scrollTerminator = this._$wrapper;\r\n        var terminatorEventName = addNamespace(dragEventMove, this.NAME);\r\n        eventsEngine.off($scrollTerminator, terminatorEventName);\r\n        eventsEngine.on($scrollTerminator, terminatorEventName, {\r\n            validate: function() {\r\n                return true\r\n            },\r\n            getDirection: function() {\r\n                return \"both\"\r\n            },\r\n            _toggleGestureCover: function(toggle) {\r\n                if (!toggle) {\r\n                    this._toggleGestureCoverImpl(toggle)\r\n                }\r\n            },\r\n            _clearSelection: noop,\r\n            isNative: true\r\n        }, e => {\r\n            var originalEvent = e.originalEvent.originalEvent;\r\n            var {\r\n                type: type\r\n            } = originalEvent || {};\r\n            var isWheel = \"wheel\" === type;\r\n            var isMouseMove = \"mousemove\" === type;\r\n            var isScrollByWheel = isWheel && !isCommandKeyPressed(e);\r\n            e._cancelPreventDefault = true;\r\n            if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    },\r\n    _getDragTarget: function() {\r\n        return this.$content()\r\n    },\r\n    _dragStartHandler: function(e) {\r\n        e.targetElements = [];\r\n        this._prevOffset = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        var allowedOffsets = this._allowedOffsets();\r\n        e.maxTopOffset = allowedOffsets.top;\r\n        e.maxBottomOffset = allowedOffsets.bottom;\r\n        e.maxLeftOffset = allowedOffsets.left;\r\n        e.maxRightOffset = allowedOffsets.right\r\n    },\r\n    _getDragResizeContainer: function() {\r\n        var isContainerDefined = originalViewPort().get(0) || this.option(\"container\");\r\n        var $container = !isContainerDefined ? $(window) : this._$container;\r\n        return $container\r\n    },\r\n    _deltaSize: function() {\r\n        var $content = this._$content;\r\n        var $container = this._getDragResizeContainer();\r\n        var contentWidth = $content.outerWidth();\r\n        var contentHeight = $content.outerHeight();\r\n        var containerWidth = $container.outerWidth();\r\n        var containerHeight = $container.outerHeight();\r\n        if (this._isWindow($container)) {\r\n            var document = domAdapter.getDocument();\r\n            var fullPageHeight = Math.max($(document).outerHeight(), containerHeight);\r\n            var fullPageWidth = Math.max($(document).outerWidth(), containerWidth);\r\n            containerHeight = fullPageHeight;\r\n            containerWidth = fullPageWidth\r\n        }\r\n        return {\r\n            width: containerWidth - contentWidth,\r\n            height: containerHeight - contentHeight\r\n        }\r\n    },\r\n    _dragUpdateHandler: function(e) {\r\n        var offset = e.offset;\r\n        var prevOffset = this._prevOffset;\r\n        var targetOffset = {\r\n            top: offset.y - prevOffset.y,\r\n            left: offset.x - prevOffset.x\r\n        };\r\n        this._changePosition(targetOffset);\r\n        this._prevOffset = offset\r\n    },\r\n    _changePosition: function(offset) {\r\n        var position = locate(this._$content);\r\n        move(this._$content, {\r\n            left: position.left + offset.left,\r\n            top: position.top + offset.top\r\n        });\r\n        this._positionChangeHandled = true\r\n    },\r\n    _allowedOffsets: function() {\r\n        var position = locate(this._$content);\r\n        var deltaSize = this._deltaSize();\r\n        var isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0;\r\n        var shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? locate(this._$wrapper) : {\r\n            top: 0,\r\n            left: 0\r\n        };\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        return {\r\n            top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\r\n            bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\r\n            left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\r\n            right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\r\n        }\r\n    },\r\n    _moveFromContainer: function() {\r\n        this._$content.appendTo(this.$element());\r\n        this._detachWrapperToContainer()\r\n    },\r\n    _detachWrapperToContainer: function() {\r\n        this._$wrapper.detach()\r\n    },\r\n    _moveToContainer: function() {\r\n        this._attachWrapperToContainer();\r\n        this._$content.appendTo(this._$wrapper)\r\n    },\r\n    _attachWrapperToContainer: function() {\r\n        var $element = this.$element();\r\n        var containerDefined = void 0 !== this.option(\"container\");\r\n        var renderContainer = containerDefined ? this._$container : swatch.getSwatchContainer($element);\r\n        if (renderContainer && renderContainer[0] === $element.parent()[0]) {\r\n            renderContainer = $element\r\n        }\r\n        this._$wrapper.appendTo(renderContainer)\r\n    },\r\n    _fixHeightAfterSafariAddressBarResizing: function() {\r\n        if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\r\n            this._$wrapper.css(\"minHeight\", window.innerHeight)\r\n        }\r\n    },\r\n    _renderGeometry: function(isDimensionChanged) {\r\n        if (this.option(\"visible\") && hasWindow()) {\r\n            this._renderGeometryImpl(isDimensionChanged)\r\n        }\r\n    },\r\n    _renderGeometryImpl: function(isDimensionChanged) {\r\n        this._stopAnimation();\r\n        this._normalizePosition();\r\n        this._renderWrapper();\r\n        this._fixHeightAfterSafariAddressBarResizing();\r\n        this._renderDimensions();\r\n        var resultPosition = this._renderPosition();\r\n        this._actions.onPositioned({\r\n            position: resultPosition\r\n        })\r\n    },\r\n    _fixWrapperPosition: function() {\r\n        this._$wrapper.css(\"position\", this._useFixedPosition() ? \"fixed\" : \"absolute\")\r\n    },\r\n    _useFixedPosition: function() {\r\n        return this._shouldFixBodyPosition() || this.option(\"_fixedPosition\")\r\n    },\r\n    _shouldFixBodyPosition: function() {\r\n        var $container = this._getContainer();\r\n        return this._isWindow($container) && (!iOS || void 0 !== this._bodyScrollTop)\r\n    },\r\n    _toggleSafariScrolling: function(scrollingEnabled) {\r\n        if (iOS && this._shouldFixBodyPosition()) {\r\n            var body = domAdapter.getBody();\r\n            if (scrollingEnabled) {\r\n                $(body).removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n                window.scrollTo(0, this._bodyScrollTop);\r\n                this._bodyScrollTop = void 0\r\n            } else if (this.option(\"visible\")) {\r\n                this._bodyScrollTop = window.pageYOffset;\r\n                $(body).addClass(PREVENT_SAFARI_SCROLLING_CLASS)\r\n            }\r\n        }\r\n    },\r\n    _renderWrapper: function() {\r\n        this._fixWrapperPosition();\r\n        this._renderWrapperDimensions();\r\n        this._renderWrapperPosition()\r\n    },\r\n    _renderWrapperDimensions: function() {\r\n        var wrapperWidth;\r\n        var wrapperHeight;\r\n        var $container = this._getContainer();\r\n        if (!$container) {\r\n            return\r\n        }\r\n        var isWindow = this._isWindow($container);\r\n        wrapperWidth = isWindow ? \"\" : $container.outerWidth(), wrapperHeight = isWindow ? \"\" : $container.outerHeight();\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    },\r\n    _isWindow: function($element) {\r\n        return !!$element && isWindow($element.get(0))\r\n    },\r\n    _renderWrapperPosition: function() {\r\n        var $container = this._getContainer();\r\n        if ($container) {\r\n            positionUtils.setup(this._$wrapper, {\r\n                my: \"top left\",\r\n                at: \"top left\",\r\n                of: $container\r\n            })\r\n        }\r\n    },\r\n    _getContainer: function() {\r\n        var position = this._position;\r\n        var container = this.option(\"container\");\r\n        var positionOf = null;\r\n        if (!container && position) {\r\n            positionOf = isEvent(position.of) ? window : position.of || window\r\n        }\r\n        return getElement(container || positionOf)\r\n    },\r\n    _renderDimensions: function() {\r\n        var content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    },\r\n    _renderPosition: function() {\r\n        if (this._positionChangeHandled) {\r\n            var allowedOffsets = this._allowedOffsets();\r\n            this._changePosition({\r\n                top: fitIntoRange(0, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: fitIntoRange(0, -allowedOffsets.left, allowedOffsets.right)\r\n            })\r\n        } else {\r\n            this._renderOverlayBoundaryOffset();\r\n            resetPosition(this._$content);\r\n            var position = this._transformStringPosition(this._position, POSITION_ALIASES);\r\n            var resultPosition = positionUtils.setup(this._$content, position);\r\n            forceRepaint(this._$content);\r\n            return resultPosition\r\n        }\r\n    },\r\n    _transformStringPosition: function(position, positionAliases) {\r\n        if (isString(position)) {\r\n            position = extend({}, positionAliases[position])\r\n        }\r\n        return position\r\n    },\r\n    _renderOverlayBoundaryOffset: function() {\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\")\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$content\r\n    },\r\n    _attachKeyboardEvents: function() {\r\n        this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts))\r\n    },\r\n    _keyboardHandler: function(options) {\r\n        var e = options.originalEvent;\r\n        var $target = $(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            this.callBase(...arguments)\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.option(\"visible\")\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._renderGeometry(true)\r\n    },\r\n    _clean: function() {\r\n        if (!this._contentAlreadyRendered) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    },\r\n    _stopShowTimer() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    },\r\n    _dispose: function() {\r\n        fx.stop(this._$content, false);\r\n        clearTimeout(this._deferShowTimer);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._toggleSafariScrolling(true);\r\n        this._actions = null;\r\n        this.callBase();\r\n        zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    },\r\n    _toggleDisabledState: function(value) {\r\n        this.callBase(...arguments);\r\n        this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value))\r\n    },\r\n    _toggleRTLDirection: function(rtl) {\r\n        this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        if (inArray(args.name, ACTIONS) > -1) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"dragEnabled\":\r\n                this._renderDrag();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"resizeEnabled\":\r\n                this._renderResize();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"shading\":\r\n            case \"shadingColor\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n            case \"boundaryOffset\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionChangeHandled = false;\r\n                this._renderGeometry();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done(() => {\r\n                    if (!this._animateDeferred) {\r\n                        return\r\n                    }\r\n                    this._animateDeferred.resolveWith(this)\r\n                });\r\n                break;\r\n            case \"target\":\r\n                this._initTarget(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"container\":\r\n                this._initContainer(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"hideTopOverlayHandler\":\r\n                this._toggleHideTopOverlayCallback(false);\r\n                this._initHideTopOverlayHandler(args.value);\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnTargetScroll\":\r\n                this._toggleParentsScrollSubscription(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"animation\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                this.callBase(args);\r\n                break;\r\n            case \"_fixedPosition\":\r\n                this._fixWrapperPosition();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    toggle: function(showing) {\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        var result = new Deferred;\r\n        if (showing === this.option(\"visible\")) {\r\n            return result.resolveWith(this, [showing]).promise()\r\n        }\r\n        var animateDeferred = new Deferred;\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        animateDeferred.promise().done(() => {\r\n            delete this._animateDeferred;\r\n            result.resolveWith(this, [this.option(\"visible\")])\r\n        });\r\n        return result.promise()\r\n    },\r\n    $content: function() {\r\n        return this._$content\r\n    },\r\n    show: function() {\r\n        return this.toggle(true)\r\n    },\r\n    hide: function() {\r\n        return this.toggle(false)\r\n    },\r\n    content: function() {\r\n        return getPublicElement(this._$content)\r\n    },\r\n    repaint: function() {\r\n        if (this._contentAlreadyRendered) {\r\n            this._renderGeometry();\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    }\r\n});\r\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\r\nregisterComponent(\"dxOverlay\", Overlay);\r\nexport default Overlay;\r\n"]},"metadata":{},"sourceType":"module"}