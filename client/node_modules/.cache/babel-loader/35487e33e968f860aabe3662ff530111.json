{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.filter_custom_operations.js)\r\n * Version: 21.1.5\r\n * Build date: Mon Aug 02 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport messageLocalization from \"../../localization/message\";\nimport { extend } from \"../../core/utils/extend\";\nimport { DataSource } from \"../../data/data_source/data_source\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { isGroup, isCondition, getFilterExpression, renderValueText } from \"../filter_builder/utils\";\nimport errors from \"../widget/ui.errors\";\n\nfunction baseOperation(grid) {\n  var getFullText = function (itemText, parentText) {\n    return parentText ? parentText + \"/\" + itemText : itemText;\n  };\n\n  var headerFilterController = grid && grid.getController(\"headerFilter\");\n  return {\n    dataTypes: [\"string\", \"date\", \"datetime\", \"number\", \"boolean\", \"object\"],\n    calculateFilterExpression: function (filterValue, field, fields) {\n      var result = [];\n      var lastIndex = filterValue.length - 1;\n      filterValue && filterValue.forEach(function (value, index) {\n        if (isCondition(value) || isGroup(value)) {\n          var filterExpression = getFilterExpression(value, fields, [], \"headerFilter\");\n          result.push(filterExpression);\n        } else {\n          result.push(getFilterExpression([field.dataField, \"=\", value], fields, [], \"headerFilter\"));\n        }\n\n        index !== lastIndex && result.push(\"or\");\n      });\n\n      if (1 === result.length) {\n        result = result[0];\n      }\n\n      return result;\n    },\n    editorTemplate: function (conditionInfo, container) {\n      var div = $(\"<div>\").addClass(\"dx-filterbuilder-item-value-text\").appendTo(container);\n      var column = extend(true, {}, grid.columnOption(conditionInfo.field.dataField));\n      renderValueText(div, conditionInfo.text && conditionInfo.text.split(\"|\"));\n      column.filterType = \"include\";\n      column.filterValues = conditionInfo.value ? conditionInfo.value.slice() : [];\n      headerFilterController.showHeaderFilterMenuBase({\n        columnElement: div,\n        column: column,\n        apply: function () {\n          value = this.filterValues, void conditionInfo.setValue(value);\n          var value;\n          headerFilterController.hideHeaderFilterMenu();\n          conditionInfo.closeEditor();\n        },\n        onHidden: function () {\n          conditionInfo.closeEditor();\n        },\n        isFilterBuilder: true\n      });\n      return container;\n    },\n    customizeText: function (fieldInfo) {\n      var value = fieldInfo.value;\n      var column = grid.columnOption(fieldInfo.field.dataField);\n      var headerFilter = column && column.headerFilter;\n      var lookup = column && column.lookup;\n\n      if (headerFilter && headerFilter.dataSource || lookup && lookup.dataSource) {\n        column = extend({}, column, {\n          filterType: \"include\",\n          filterValues: [value]\n        });\n        var dataSourceOptions = headerFilterController.getDataSource(column);\n        dataSourceOptions.paginate = false;\n        var dataSource = new DataSource(dataSourceOptions);\n        var result = new Deferred();\n        var key = dataSource.store().key();\n\n        if (key) {\n          dataSource.filter([key, \"=\", fieldInfo.value]);\n        } else if (fieldInfo.field.calculateDisplayValue) {\n          errors.log(\"W1017\");\n        }\n\n        dataSource.load().done(items => {\n          result.resolve(function getSelectedItemsTexts(items, parentText) {\n            var result = [];\n            items.forEach(function (item) {\n              if (item.items) {\n                var selectedItemsTexts = getSelectedItemsTexts(item.items, getFullText(item.text, parentText));\n                result = result.concat(selectedItemsTexts);\n              }\n\n              item.selected && result.push(getFullText(item.text, parentText));\n            });\n            return result;\n          }(items)[0]);\n        });\n        return result;\n      } else {\n        var text = headerFilterController.getHeaderItemText(value, column, 0, grid.option(\"headerFilter\"));\n        return text;\n      }\n    }\n  };\n}\n\nexport function anyOf(grid) {\n  return extend(baseOperation(grid), {\n    name: \"anyof\",\n    icon: \"selectall\",\n    caption: messageLocalization.format(\"dxFilterBuilder-filterOperationAnyOf\")\n  });\n}\nexport function noneOf(grid) {\n  var baseOp = baseOperation(grid);\n  return extend({}, baseOp, {\n    calculateFilterExpression: function (filterValue, field, fields) {\n      var baseFilter = baseOp.calculateFilterExpression(filterValue, field, fields);\n\n      if (!baseFilter || 0 === baseFilter.length) {\n        return null;\n      }\n\n      return \"!\" === baseFilter[0] ? baseFilter : [\"!\", baseFilter];\n    },\n    name: \"noneof\",\n    icon: \"unselectall\",\n    caption: messageLocalization.format(\"dxFilterBuilder-filterOperationNoneOf\")\n  });\n}","map":{"version":3,"sources":["/home/mukulsharma/Desktop/CyAmast/PortIntel/dashApp/node_modules/devextreme/esm/ui/grid_core/ui.grid_core.filter_custom_operations.js"],"names":["$","messageLocalization","extend","DataSource","Deferred","isGroup","isCondition","getFilterExpression","renderValueText","errors","baseOperation","grid","getFullText","itemText","parentText","headerFilterController","getController","dataTypes","calculateFilterExpression","filterValue","field","fields","result","lastIndex","length","forEach","value","index","filterExpression","push","dataField","editorTemplate","conditionInfo","container","div","addClass","appendTo","column","columnOption","text","split","filterType","filterValues","slice","showHeaderFilterMenuBase","columnElement","apply","setValue","hideHeaderFilterMenu","closeEditor","onHidden","isFilterBuilder","customizeText","fieldInfo","headerFilter","lookup","dataSource","dataSourceOptions","getDataSource","paginate","key","store","filter","calculateDisplayValue","log","load","done","items","resolve","getSelectedItemsTexts","item","selectedItemsTexts","concat","selected","getHeaderItemText","option","anyOf","name","icon","caption","format","noneOf","baseOp","baseFilter"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.filter_custom_operations.js)\r\n * Version: 21.1.5\r\n * Build date: Mon Aug 02 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    DataSource\r\n} from \"../../data/data_source/data_source\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    isGroup,\r\n    isCondition,\r\n    getFilterExpression,\r\n    renderValueText\r\n} from \"../filter_builder/utils\";\r\nimport errors from \"../widget/ui.errors\";\r\n\r\nfunction baseOperation(grid) {\r\n    var getFullText = function(itemText, parentText) {\r\n        return parentText ? parentText + \"/\" + itemText : itemText\r\n    };\r\n    var headerFilterController = grid && grid.getController(\"headerFilter\");\r\n    return {\r\n        dataTypes: [\"string\", \"date\", \"datetime\", \"number\", \"boolean\", \"object\"],\r\n        calculateFilterExpression: function(filterValue, field, fields) {\r\n            var result = [];\r\n            var lastIndex = filterValue.length - 1;\r\n            filterValue && filterValue.forEach((function(value, index) {\r\n                if (isCondition(value) || isGroup(value)) {\r\n                    var filterExpression = getFilterExpression(value, fields, [], \"headerFilter\");\r\n                    result.push(filterExpression)\r\n                } else {\r\n                    result.push(getFilterExpression([field.dataField, \"=\", value], fields, [], \"headerFilter\"))\r\n                }\r\n                index !== lastIndex && result.push(\"or\")\r\n            }));\r\n            if (1 === result.length) {\r\n                result = result[0]\r\n            }\r\n            return result\r\n        },\r\n        editorTemplate: function(conditionInfo, container) {\r\n            var div = $(\"<div>\").addClass(\"dx-filterbuilder-item-value-text\").appendTo(container);\r\n            var column = extend(true, {}, grid.columnOption(conditionInfo.field.dataField));\r\n            renderValueText(div, conditionInfo.text && conditionInfo.text.split(\"|\"));\r\n            column.filterType = \"include\";\r\n            column.filterValues = conditionInfo.value ? conditionInfo.value.slice() : [];\r\n            headerFilterController.showHeaderFilterMenuBase({\r\n                columnElement: div,\r\n                column: column,\r\n                apply: function() {\r\n                    value = this.filterValues, void conditionInfo.setValue(value);\r\n                    var value;\r\n                    headerFilterController.hideHeaderFilterMenu();\r\n                    conditionInfo.closeEditor()\r\n                },\r\n                onHidden: function() {\r\n                    conditionInfo.closeEditor()\r\n                },\r\n                isFilterBuilder: true\r\n            });\r\n            return container\r\n        },\r\n        customizeText: function(fieldInfo) {\r\n            var value = fieldInfo.value;\r\n            var column = grid.columnOption(fieldInfo.field.dataField);\r\n            var headerFilter = column && column.headerFilter;\r\n            var lookup = column && column.lookup;\r\n            if (headerFilter && headerFilter.dataSource || lookup && lookup.dataSource) {\r\n                column = extend({}, column, {\r\n                    filterType: \"include\",\r\n                    filterValues: [value]\r\n                });\r\n                var dataSourceOptions = headerFilterController.getDataSource(column);\r\n                dataSourceOptions.paginate = false;\r\n                var dataSource = new DataSource(dataSourceOptions);\r\n                var result = new Deferred;\r\n                var key = dataSource.store().key();\r\n                if (key) {\r\n                    dataSource.filter([key, \"=\", fieldInfo.value])\r\n                } else if (fieldInfo.field.calculateDisplayValue) {\r\n                    errors.log(\"W1017\")\r\n                }\r\n                dataSource.load().done(items => {\r\n                    result.resolve(function getSelectedItemsTexts(items, parentText) {\r\n                        var result = [];\r\n                        items.forEach((function(item) {\r\n                            if (item.items) {\r\n                                var selectedItemsTexts = getSelectedItemsTexts(item.items, getFullText(item.text, parentText));\r\n                                result = result.concat(selectedItemsTexts)\r\n                            }\r\n                            item.selected && result.push(getFullText(item.text, parentText))\r\n                        }));\r\n                        return result\r\n                    }(items)[0])\r\n                });\r\n                return result\r\n            } else {\r\n                var text = headerFilterController.getHeaderItemText(value, column, 0, grid.option(\"headerFilter\"));\r\n                return text\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function anyOf(grid) {\r\n    return extend(baseOperation(grid), {\r\n        name: \"anyof\",\r\n        icon: \"selectall\",\r\n        caption: messageLocalization.format(\"dxFilterBuilder-filterOperationAnyOf\")\r\n    })\r\n}\r\nexport function noneOf(grid) {\r\n    var baseOp = baseOperation(grid);\r\n    return extend({}, baseOp, {\r\n        calculateFilterExpression: function(filterValue, field, fields) {\r\n            var baseFilter = baseOp.calculateFilterExpression(filterValue, field, fields);\r\n            if (!baseFilter || 0 === baseFilter.length) {\r\n                return null\r\n            }\r\n            return \"!\" === baseFilter[0] ? baseFilter : [\"!\", baseFilter]\r\n        },\r\n        name: \"noneof\",\r\n        icon: \"unselectall\",\r\n        caption: messageLocalization.format(\"dxFilterBuilder-filterOperationNoneOf\")\r\n    })\r\n}\r\n"]},"metadata":{},"sourceType":"module"}