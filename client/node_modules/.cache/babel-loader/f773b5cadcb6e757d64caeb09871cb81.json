{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/list/ui.list.edit.provider.js)\r\n * Version: 21.1.5\r\n * Build date: Mon Aug 02 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { noop } from \"../../core/utils/common\";\nimport Class from \"../../core/class\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport errors from \"../widget/ui.errors\";\nimport { registry } from \"./ui.list.edit.decorator_registry\";\nimport \"./ui.list.edit.decorator.static\";\nimport \"./ui.list.edit.decorator.switchable.button\";\nimport \"./ui.list.edit.decorator.switchable.slide\";\nimport \"./ui.list.edit.decorator.swipe\";\nimport \"./ui.list.edit.decorator.context\";\nimport \"./ui.list.edit.decorator.selection\";\nimport \"./ui.list.edit.decorator.reorder\";\nvar editOptionsRegistry = [];\n\nvar registerOption = function (enabledFunc, decoratorTypeFunc, decoratorSubTypeFunc) {\n  editOptionsRegistry.push({\n    enabled: enabledFunc,\n    decoratorType: decoratorTypeFunc,\n    decoratorSubType: decoratorSubTypeFunc\n  });\n};\n\nregisterOption(function () {\n  return this.option(\"menuItems\").length;\n}, function () {\n  return \"menu\";\n}, function () {\n  return this.option(\"menuMode\");\n});\nregisterOption(function () {\n  return !this.option(\"menuItems\").length && this.option(\"allowItemDeleting\");\n}, function () {\n  var mode = this.option(\"itemDeleteMode\");\n  return \"toggle\" === mode || \"slideButton\" === mode || \"swipe\" === mode || \"static\" === mode ? \"delete\" : \"menu\";\n}, function () {\n  var mode = this.option(\"itemDeleteMode\");\n\n  if (\"slideItem\" === mode) {\n    mode = \"slide\";\n  }\n\n  if (\"hold\" === mode) {\n    mode = \"context\";\n  }\n\n  return mode;\n});\nregisterOption(function () {\n  return \"none\" !== this.option(\"selectionMode\") && this.option(\"showSelectionControls\");\n}, function () {\n  return \"selection\";\n}, function () {\n  return \"default\";\n});\nregisterOption(function () {\n  return this.option(\"itemDragging.allowReordering\") || this.option(\"itemDragging.allowDropInsideItem\") || this.option(\"itemDragging.group\");\n}, function () {\n  return \"reorder\";\n}, function () {\n  return \"default\";\n});\nvar LIST_ITEM_BEFORE_BAG_CLASS = \"dx-list-item-before-bag\";\nvar LIST_ITEM_AFTER_BAG_CLASS = \"dx-list-item-after-bag\";\nvar DECORATOR_BEFORE_BAG_CREATE_METHOD = \"beforeBag\";\nvar DECORATOR_AFTER_BAG_CREATE_METHOD = \"afterBag\";\nvar DECORATOR_MODIFY_ELEMENT_METHOD = \"modifyElement\";\nvar DECORATOR_AFTER_RENDER_METHOD = \"afterRender\";\nvar DECORATOR_GET_EXCLUDED_SELECTORS_METHOD = \"getExcludedSelectors\";\nvar EditProvider = Class.inherit({\n  ctor: function (list) {\n    this._list = list;\n\n    this._fetchRequiredDecorators();\n  },\n  dispose: function () {\n    if (this._decorators && this._decorators.length) {\n      each(this._decorators, function (_, decorator) {\n        decorator.dispose();\n      });\n    }\n  },\n  _fetchRequiredDecorators: function () {\n    this._decorators = [];\n    each(editOptionsRegistry, function (_, option) {\n      var optionEnabled = option.enabled.call(this._list);\n\n      if (optionEnabled) {\n        var decoratorType = option.decoratorType.call(this._list);\n        var decoratorSubType = option.decoratorSubType.call(this._list);\n\n        var decorator = this._createDecorator(decoratorType, decoratorSubType);\n\n        this._decorators.push(decorator);\n      }\n    }.bind(this));\n  },\n  _createDecorator: function (type, subType) {\n    var decoratorClass = this._findDecorator(type, subType);\n\n    return new decoratorClass(this._list);\n  },\n  _findDecorator: function (type, subType) {\n    var foundDecorator = registry[type][subType];\n\n    if (!foundDecorator) {\n      throw errors.Error(\"E1012\", type, subType);\n    }\n\n    return foundDecorator;\n  },\n  modifyItemElement: function (args) {\n    var $itemElement = $(args.itemElement);\n    var config = {\n      $itemElement: $itemElement\n    };\n\n    this._prependBeforeBags($itemElement, config);\n\n    this._appendAfterBags($itemElement, config);\n\n    this._applyDecorators(DECORATOR_MODIFY_ELEMENT_METHOD, config);\n  },\n  afterItemsRendered: function () {\n    this._applyDecorators(DECORATOR_AFTER_RENDER_METHOD);\n  },\n  _prependBeforeBags: function ($itemElement, config) {\n    var $beforeBags = this._collectDecoratorsMarkup(DECORATOR_BEFORE_BAG_CREATE_METHOD, config, LIST_ITEM_BEFORE_BAG_CLASS);\n\n    $itemElement.prepend($beforeBags);\n  },\n  _appendAfterBags: function ($itemElement, config) {\n    var $afterBags = this._collectDecoratorsMarkup(DECORATOR_AFTER_BAG_CREATE_METHOD, config, LIST_ITEM_AFTER_BAG_CLASS);\n\n    $itemElement.append($afterBags);\n  },\n  _collectDecoratorsMarkup: function (method, config, containerClass) {\n    var $collector = $(\"<div>\");\n    each(this._decorators, function () {\n      var $container = $(\"<div>\").addClass(containerClass);\n      this[method](extend({\n        $container: $container\n      }, config));\n\n      if ($container.children().length) {\n        $collector.append($container);\n      }\n    });\n    return $collector.children();\n  },\n  _applyDecorators: function (method, config) {\n    each(this._decorators, function () {\n      this[method](config);\n    });\n  },\n  _handlerExists: function (name) {\n    if (!this._decorators) {\n      return false;\n    }\n\n    var decorators = this._decorators;\n    var length = decorators.length;\n\n    for (var i = 0; i < length; i++) {\n      if (decorators[i][name] !== noop) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _eventHandler: function (name, $itemElement, e) {\n    if (!this._decorators) {\n      return false;\n    }\n\n    var response = false;\n    var decorators = this._decorators;\n    var length = decorators.length;\n\n    for (var i = 0; i < length; i++) {\n      response = decorators[i][name]($itemElement, e);\n\n      if (response) {\n        break;\n      }\n    }\n\n    return response;\n  },\n  handleClick: function ($itemElement, e) {\n    return this._eventHandler(\"handleClick\", $itemElement, e);\n  },\n  handleKeyboardEvents: function (currentFocusedIndex, moveFocusUp) {\n    return this._eventHandler(\"handleKeyboardEvents\", currentFocusedIndex, moveFocusUp);\n  },\n  handleEnterPressing: function (e) {\n    return this._eventHandler(\"handleEnterPressing\", e);\n  },\n  contextMenuHandlerExists: function () {\n    return this._handlerExists(\"handleContextMenu\");\n  },\n  handleContextMenu: function ($itemElement, e) {\n    return this._eventHandler(\"handleContextMenu\", $itemElement, e);\n  },\n  getExcludedItemSelectors: function () {\n    var excludedSelectors = [];\n\n    this._applyDecorators(DECORATOR_GET_EXCLUDED_SELECTORS_METHOD, excludedSelectors);\n\n    return excludedSelectors.join(\",\");\n  }\n});\nexport default EditProvider;","map":{"version":3,"sources":["/home/mukulsharma/Desktop/CyAmast/PortIntel/dashApp/node_modules/devextreme/esm/ui/list/ui.list.edit.provider.js"],"names":["$","noop","Class","extend","each","errors","registry","editOptionsRegistry","registerOption","enabledFunc","decoratorTypeFunc","decoratorSubTypeFunc","push","enabled","decoratorType","decoratorSubType","option","length","mode","LIST_ITEM_BEFORE_BAG_CLASS","LIST_ITEM_AFTER_BAG_CLASS","DECORATOR_BEFORE_BAG_CREATE_METHOD","DECORATOR_AFTER_BAG_CREATE_METHOD","DECORATOR_MODIFY_ELEMENT_METHOD","DECORATOR_AFTER_RENDER_METHOD","DECORATOR_GET_EXCLUDED_SELECTORS_METHOD","EditProvider","inherit","ctor","list","_list","_fetchRequiredDecorators","dispose","_decorators","_","decorator","optionEnabled","call","_createDecorator","bind","type","subType","decoratorClass","_findDecorator","foundDecorator","Error","modifyItemElement","args","$itemElement","itemElement","config","_prependBeforeBags","_appendAfterBags","_applyDecorators","afterItemsRendered","$beforeBags","_collectDecoratorsMarkup","prepend","$afterBags","append","method","containerClass","$collector","$container","addClass","children","_handlerExists","name","decorators","i","_eventHandler","e","response","handleClick","handleKeyboardEvents","currentFocusedIndex","moveFocusUp","handleEnterPressing","contextMenuHandlerExists","handleContextMenu","getExcludedItemSelectors","excludedSelectors","join"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/list/ui.list.edit.provider.js)\r\n * Version: 21.1.5\r\n * Build date: Mon Aug 02 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport {\r\n    registry\r\n} from \"./ui.list.edit.decorator_registry\";\r\nimport \"./ui.list.edit.decorator.static\";\r\nimport \"./ui.list.edit.decorator.switchable.button\";\r\nimport \"./ui.list.edit.decorator.switchable.slide\";\r\nimport \"./ui.list.edit.decorator.swipe\";\r\nimport \"./ui.list.edit.decorator.context\";\r\nimport \"./ui.list.edit.decorator.selection\";\r\nimport \"./ui.list.edit.decorator.reorder\";\r\nvar editOptionsRegistry = [];\r\nvar registerOption = function(enabledFunc, decoratorTypeFunc, decoratorSubTypeFunc) {\r\n    editOptionsRegistry.push({\r\n        enabled: enabledFunc,\r\n        decoratorType: decoratorTypeFunc,\r\n        decoratorSubType: decoratorSubTypeFunc\r\n    })\r\n};\r\nregisterOption((function() {\r\n    return this.option(\"menuItems\").length\r\n}), (function() {\r\n    return \"menu\"\r\n}), (function() {\r\n    return this.option(\"menuMode\")\r\n}));\r\nregisterOption((function() {\r\n    return !this.option(\"menuItems\").length && this.option(\"allowItemDeleting\")\r\n}), (function() {\r\n    var mode = this.option(\"itemDeleteMode\");\r\n    return \"toggle\" === mode || \"slideButton\" === mode || \"swipe\" === mode || \"static\" === mode ? \"delete\" : \"menu\"\r\n}), (function() {\r\n    var mode = this.option(\"itemDeleteMode\");\r\n    if (\"slideItem\" === mode) {\r\n        mode = \"slide\"\r\n    }\r\n    if (\"hold\" === mode) {\r\n        mode = \"context\"\r\n    }\r\n    return mode\r\n}));\r\nregisterOption((function() {\r\n    return \"none\" !== this.option(\"selectionMode\") && this.option(\"showSelectionControls\")\r\n}), (function() {\r\n    return \"selection\"\r\n}), (function() {\r\n    return \"default\"\r\n}));\r\nregisterOption((function() {\r\n    return this.option(\"itemDragging.allowReordering\") || this.option(\"itemDragging.allowDropInsideItem\") || this.option(\"itemDragging.group\")\r\n}), (function() {\r\n    return \"reorder\"\r\n}), (function() {\r\n    return \"default\"\r\n}));\r\nvar LIST_ITEM_BEFORE_BAG_CLASS = \"dx-list-item-before-bag\";\r\nvar LIST_ITEM_AFTER_BAG_CLASS = \"dx-list-item-after-bag\";\r\nvar DECORATOR_BEFORE_BAG_CREATE_METHOD = \"beforeBag\";\r\nvar DECORATOR_AFTER_BAG_CREATE_METHOD = \"afterBag\";\r\nvar DECORATOR_MODIFY_ELEMENT_METHOD = \"modifyElement\";\r\nvar DECORATOR_AFTER_RENDER_METHOD = \"afterRender\";\r\nvar DECORATOR_GET_EXCLUDED_SELECTORS_METHOD = \"getExcludedSelectors\";\r\nvar EditProvider = Class.inherit({\r\n    ctor: function(list) {\r\n        this._list = list;\r\n        this._fetchRequiredDecorators()\r\n    },\r\n    dispose: function() {\r\n        if (this._decorators && this._decorators.length) {\r\n            each(this._decorators, (function(_, decorator) {\r\n                decorator.dispose()\r\n            }))\r\n        }\r\n    },\r\n    _fetchRequiredDecorators: function() {\r\n        this._decorators = [];\r\n        each(editOptionsRegistry, function(_, option) {\r\n            var optionEnabled = option.enabled.call(this._list);\r\n            if (optionEnabled) {\r\n                var decoratorType = option.decoratorType.call(this._list);\r\n                var decoratorSubType = option.decoratorSubType.call(this._list);\r\n                var decorator = this._createDecorator(decoratorType, decoratorSubType);\r\n                this._decorators.push(decorator)\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _createDecorator: function(type, subType) {\r\n        var decoratorClass = this._findDecorator(type, subType);\r\n        return new decoratorClass(this._list)\r\n    },\r\n    _findDecorator: function(type, subType) {\r\n        var foundDecorator = registry[type][subType];\r\n        if (!foundDecorator) {\r\n            throw errors.Error(\"E1012\", type, subType)\r\n        }\r\n        return foundDecorator\r\n    },\r\n    modifyItemElement: function(args) {\r\n        var $itemElement = $(args.itemElement);\r\n        var config = {\r\n            $itemElement: $itemElement\r\n        };\r\n        this._prependBeforeBags($itemElement, config);\r\n        this._appendAfterBags($itemElement, config);\r\n        this._applyDecorators(DECORATOR_MODIFY_ELEMENT_METHOD, config)\r\n    },\r\n    afterItemsRendered: function() {\r\n        this._applyDecorators(DECORATOR_AFTER_RENDER_METHOD)\r\n    },\r\n    _prependBeforeBags: function($itemElement, config) {\r\n        var $beforeBags = this._collectDecoratorsMarkup(DECORATOR_BEFORE_BAG_CREATE_METHOD, config, LIST_ITEM_BEFORE_BAG_CLASS);\r\n        $itemElement.prepend($beforeBags)\r\n    },\r\n    _appendAfterBags: function($itemElement, config) {\r\n        var $afterBags = this._collectDecoratorsMarkup(DECORATOR_AFTER_BAG_CREATE_METHOD, config, LIST_ITEM_AFTER_BAG_CLASS);\r\n        $itemElement.append($afterBags)\r\n    },\r\n    _collectDecoratorsMarkup: function(method, config, containerClass) {\r\n        var $collector = $(\"<div>\");\r\n        each(this._decorators, (function() {\r\n            var $container = $(\"<div>\").addClass(containerClass);\r\n            this[method](extend({\r\n                $container: $container\r\n            }, config));\r\n            if ($container.children().length) {\r\n                $collector.append($container)\r\n            }\r\n        }));\r\n        return $collector.children()\r\n    },\r\n    _applyDecorators: function(method, config) {\r\n        each(this._decorators, (function() {\r\n            this[method](config)\r\n        }))\r\n    },\r\n    _handlerExists: function(name) {\r\n        if (!this._decorators) {\r\n            return false\r\n        }\r\n        var decorators = this._decorators;\r\n        var length = decorators.length;\r\n        for (var i = 0; i < length; i++) {\r\n            if (decorators[i][name] !== noop) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _eventHandler: function(name, $itemElement, e) {\r\n        if (!this._decorators) {\r\n            return false\r\n        }\r\n        var response = false;\r\n        var decorators = this._decorators;\r\n        var length = decorators.length;\r\n        for (var i = 0; i < length; i++) {\r\n            response = decorators[i][name]($itemElement, e);\r\n            if (response) {\r\n                break\r\n            }\r\n        }\r\n        return response\r\n    },\r\n    handleClick: function($itemElement, e) {\r\n        return this._eventHandler(\"handleClick\", $itemElement, e)\r\n    },\r\n    handleKeyboardEvents: function(currentFocusedIndex, moveFocusUp) {\r\n        return this._eventHandler(\"handleKeyboardEvents\", currentFocusedIndex, moveFocusUp)\r\n    },\r\n    handleEnterPressing: function(e) {\r\n        return this._eventHandler(\"handleEnterPressing\", e)\r\n    },\r\n    contextMenuHandlerExists: function() {\r\n        return this._handlerExists(\"handleContextMenu\")\r\n    },\r\n    handleContextMenu: function($itemElement, e) {\r\n        return this._eventHandler(\"handleContextMenu\", $itemElement, e)\r\n    },\r\n    getExcludedItemSelectors: function() {\r\n        var excludedSelectors = [];\r\n        this._applyDecorators(DECORATOR_GET_EXCLUDED_SELECTORS_METHOD, excludedSelectors);\r\n        return excludedSelectors.join(\",\")\r\n    }\r\n});\r\nexport default EditProvider;\r\n"]},"metadata":{},"sourceType":"module"}